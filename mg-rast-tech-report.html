
<!DOCTYPE html>
<html>
  <head>
    <title> MG-RAST Manual -  for version 3.3.6, revision 9</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap-responsive.min.css">
    <script src="js/jquery.min.js"></script>
    <style>
.docs-sidenav > li:first-child > a {
    border-radius: 6px 6px 0 0;
}
.docs-sidenav > li:last-child > a {
    border-radius: 0 0 6px 6px;
}
.docs-sidenav > li > a {
    border: 1px solid #E5E5E5;
    display: block;
    margin: 0 0 -1px;
    padding: 8px 14px;
}
.docs-sidenav > .active > a {
    border: 0 none;
    box-shadow: 1px 0 0 rgba(0, 0, 0, 0.1) inset, -1px 0 0 rgba(0, 0, 0, 0.1) inset;
    padding: 9px 15px;
    position: relative;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.15);
    z-index: 2;
}
.docs-sidenav > li > a:hover {
    background-color: #F5F5F5;
}
.glossary {
    cursor: help;
}
.footnote {
    cursor: context-menu;
}
blockquote small {
    color: black;
}
.mono {
    font-family: monospace;
}
.math {
    font-size: 17px;
    text-align: center;
    margin-top: 20px;
    margin-bottom: 20px;
}
.sigma {
    font-size: 22px;
}
pre {
    margin-top: 20px;
    margin-bottom: 20px;
}
    </style>
  </head>
  <body style="padding-bottom: 100px; padding-top: 60px;" data-target=".docs-sidebar" data-spy="scroll" data-offset="62">
    <div style="margin-top: -60px;" class="visible-phone visible-tablet hidden-desktop"></div>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
	<div class="container" style="width: 100%; padding-left: 10px;">
          <img src="Images/MGRAST_logo.png" style="float: left; background: black; margin-left: -10px; height: 55px;">
    	  <a class="brand" href="#" style="color: white; cursor: default; margin-top: 8px; margin-left: 30px;"> MG-RAST Manual</a>
	</div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="span3 docs-sidebar hidden-phone hidden-tablet">
          <ul class="nav nav-list docs-sidenav affix span3" style="top: 70px; left: 50px; background-color: #FFFFFF; border-radius: 6px; box-shadow: 0 1px 4px rgba(0, 0, 0, 0.067); padding: 0;">
<li><a href="#navitem_0" onclick="location.hash='#navitem_0';window.scrollBy(0,-60);return false;">Introduction</a></li><li><a href="#navitem_1" onclick="location.hash='#navitem_1';window.scrollBy(0,-60);return false;">Under the hood: The MG-RAST technology platform and pipeline</a></li><li><a href="#navitem_2" onclick="location.hash='#navitem_2';window.scrollBy(0,-60);return false;">MG-RAST v3 web interface</a></li><li><a href="#navitem_3" onclick="location.hash='#navitem_3';window.scrollBy(0,-60);return false;">User Manual</a></li><li><a href="#navitem_4" onclick="location.hash='#navitem_4';window.scrollBy(0,-60);return false;">FAQ</a></li><li><a href="#navitem_5" onclick="location.hash='#navitem_5';window.scrollBy(0,-60);return false;">Putting It All in Perspective</a></li><li><a href="#navitem_6" onclick="location.hash='#navitem_6';window.scrollBy(0,-60);return false;">The downloadable files for each data set</a></li><li><a href="#navitem_7" onclick="location.hash='#navitem_7';window.scrollBy(0,-60);return false;">Terms of Service</a></li><li><a href="#navitem_8" onclick="location.hash='#navitem_8';window.scrollBy(0,-60);return false;">Tools and data used by MG-RAST</a></li><li><a href="#bibliography" onclick="location.hash='#bibliography';window.scrollBy(0,-60);return false;">Bibliography</a></li></ul></div>
        <div class="span9">
          <h1 style="text-align: center;"> MG-RAST Manual</h1><h3 style="text-align: center;"> for version 3.3.6, revision 9</h3><p><b>Andreas Wilke<sup>1,2</sup>,</b> <b>Elizabeth M. Glass<sup>1,2</sup>,</b> <b>Jared Bischof<sup>2,1</sup>,</b> <b>Daniel Braithwaite<sup>1,2</sup>,</b> <b>Mark D'Souza<sup>2,1</sup>,</b> <b>Wolfgang Gerlach<sup>2,1</sup>,</b> <b>Travis Harrison<sup>2,1</sup>,</b> <b>Kevin Keegan<sup>1,2</sup>,</b> <b>Hunter Matthews<sup>1,2</sup>,</b> <b>Tobias Paczian<sup>2,1</sup>,</b> <b>Wei Tang<sup>1,2</sup>,</b> <b>William L. Trimble<sup>2,1</sup>,</b> <b>Narayan Desai<sup>1,2</sup> and</b> <b>Folker Meyer<sup>1,2</sup></b></p><p style='float: right;'> <sup>1</sup>Argonne National Laboratory  <sup>2</sup>University of Chicago</p><p style='clear: both;'><h4> <i>May 5, 2014</i></h4></p><section id='navitem_0'><h2>Introduction</h2><h3>Motivation</h3><p style='clear: both;'>The National Human Genome Research Institute (NHGRI), a division of the National Institutes of Health, publishes information (see Figure <a href="#fig:cost_per_megabase" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">cost_per_megabase</a>) describing the development of computing costs and DNA sequencing costs over time <a href="#citation_36" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[36]</a>. The dramatic gap between the shrinking costs of sequencing and the more or less stable costs of computing is a major challenge for biomedical researchers trying to use next-generation DNA sequencing platforms to obtain information on microbial communities. Wilkening <i>et al.</i> <a href="#citation_21" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[21]</a> provide a real currency cost for the analysis of 100 gigabasepairs of DNA sequence data using BLASTX on Amazon's <span class="glossary" data-toggle="popover" data-title="EC2" data-content=" Amazon Elastic Compute Cloud">EC2<sup>[?]</sup></span> service: $300,000.<span class="footnote" data-toggle="popover" data-content="This includes only the computation cost, no data transfer cost, and was computed using 2009 prices."><sup>[1]</sup></span> A more recent study by University of Maryland researchers <a href="#citation_2" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[2]</a> estimates the computation for a terabase of DNA shotgun data using their CLOVR metagenome analysis pipeline at over $5 million per terabase.</p><a name='fig:cost_per_megabase'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 4in; cursor: pointer;' onclick='window.open("Images/cost_per_megabase.png");' src='Images/cost_per_megabase.png'></div><blockquote><p><small>Chart showing shrinking cost for DNA sequencing. This comparison with Moore's law roughly describing the development of computing costs highlights the growing gap between sequence data and the available analysis resources. Source: NHGRI <a href="#citation_36" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[36]</a></small></p></blockquote><p style='clear: both;'>Nevertheless, the growth in data enabled by next-generation sequencing platforms also provides an exciting opportunity for studying microbial communities: ~99% of the microbes in which have not yet been cultured <a href="#citation_1" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[1]</a>. Cultivation-free methods (often summarized as metagenomics) offer novel insights into the biology of the vast majority of life on Earth <a href="#citation_33" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[33]</a>.</p><p style='clear: both;'>Three types of metagenomics experiments are commonly used:</p><ol><li>Environmental clone libraries (functional metagenomics):<br>use of Sanger sequencing (frequently) instead of more cost-efficient next-generation sequencing</li><li>Amplicon studies (single gene studies, <span class="glossary" data-toggle="popover" data-title="16s" data-content="16S ribosomal RNA (or 16S rRNA) is a component of the 30S small subunit of prokaryotic ribosomes">16s<sup>[?]</sup></span> rDNA):<br>next-generation sequencing of PCR amplified ribosomal genes providing a single reference gene&hyphen;based view of microbial community ecology</li></ol><p style='clear: both;'>Each of these methods has strengths and weaknesses (see <a href="#citation_33" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[33]</a>), as do the various sequencing technologies (see <a href="#citation_34" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[34]</a>).</p><p style='clear: both;'>To support user-driven analysis of all types of metagenomic data, we have provided MG-RAST  to enable researchers to study the function and composition of microbial communities.</p><p style='clear: both;'>The MG-RAST portal offers automated quality control, annotation, comparative analysis, and archiving services.</p><p style='clear: both;'>At the time of writing  MG-RAST has completed the analysis of over 45 terabasepairs of DNA data in over 115,000 datasets contributed by thousands of researchers worldwide.</p><p style='clear: both;'>The MG-RAST system provides answers to the following scientific questions:</p><ul><li>Who is out there?<br>Identifying the composition of a microbial community either by using amplicon data for single genes or by deriving community composition from shotgun metagenomic data using sequence similarities.</li><li>What are they doing?<br>Using shotgun data (or metatranscriptomic data) to derive the functional complement of a microbial community using similarity searches against a number of databases.</li></ul><p style='clear: both;'>The system supports the analysis of the prokaryotic content of samples, analysis of viruses and eukaryotic sequences is not currently supported.</p><p style='clear: both;'>MG-RAST users can upload raw sequence data in fastq, fasta and sff format; the sequences will be normalized (quality controlled) and processed and summaries automatically generated. The server provides several methods to access the different data types, including phylogenetic and metabolic reconstructions, and the ability to compare the metabolism and annotations of one or more metagenomes, individually or in groups. Access to the data is password protected unless the owner has made it public, and all data generated by the automated pipeline is available for download in variety of common formats.</p><h3>Brief description</h3><a name='section:brief-description'></a><p style='clear: both;'>The MG-RAST pipeline performs quality control, protein prediction, clustering and similarity-based annotation on nucleic acid sequence datasets using a number of bioinformatics tools (see Section <a href="#section:bioinformatics-codes" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">bioinformatics-codes</a>.  MG-RAST was built to analyze large shotgun metagenomic data sets ranging in size from megabases to terabases.  We also support amplicon (16s, 18s, ITS, É) sequence datasets and metatranscriptome (RNA-seq) sequence datasets.   The current MG-RAST pipeline is not capable of predicting coding regions from eukaryotes and thus will be of limited use for eukaryotic shotgun metagenomes and/or the eukaryotic subsets of shotgun metagenomes.</p><p style='clear: both;'>Data on MG-RAST is private to the submitting user unless shared with other users or made public by the user. We strongly encourage the eventual release of data and require metadata ("data describing data'') for data sharing or publication. Data submitted with metadata will be given priority for the computational queue.</p><p style='clear: both;'>You need to provide (raw or assembled) nucleotide sequence data and sample descriptions ("metadata''). The system accepts sequence data in FASTA, FASTQ and SFF format and metadata in the form or GSC (<a href="http://gensc.org/" target=_blank>http://gensc.org/</a>) standard compliant checklists (see Yilmaz et al, Nature Biotech, 2011).   Uploads can be put in the system via either the web interface or a command line tool.   Data and metadata are validated after upload.</p><p style='clear: both;'>You must choose quality control filtering options at the time you submit your job. MG-RAST provides several options for  quality control (QC) filtering for nucleotide sequence data, including  removal of artificial duplicate reads, quality-based read trimming, length-based read trimming, and screening for DNA of model organisms (or humans). These filters are applied before the data are submitted for annotation.</p><p style='clear: both;'>The MG-RAST pipeline assigns an accession number and puts the data in a queue for computation.  The similarity search step is computationally expensive. Small jobs can complete as fast as hours, while large jobs can spend a week waiting in line for computational resources.</p><p style='clear: both;'>MG-RAST performs a protein similarity search between predicted proteins and database proteins (for shotgun) and a nucleic-acid similarity search (for reads similar to 16S and 18S sequences). </p><p style='clear: both;'>MG-RAST presents the annotations via the tools on the analysis page which prepare, compare, display, and export the results on the website. The download page offers the input data, data at intermediate stages of filtering, the similarity search output, and summary tables of functions and organisms detected.</p><p style='clear: both;'>MG-RAST can compare thousands of data sets run through a consistent annotation pipeline.  We also provide a means to view annotations in multiple different namespaces (e.g. SEED functions, K.O. Terms, Cog Classes, EGGnoggs) via the M5Nr.</p><p style='clear: both;'>The publication "Metagenomics-a guide from sampling to data analysis'' (PMID 22587947) in Microbial Informatics and Experimentation, 2012 is a good review of best practices for experiment design for further reading.</p><h3>URL</h3><a name='section:MG-RAST-URL'></a><p style='clear: both;'><a href="http://metagenomics.anl.gov/" target=_blank>http://metagenomics.anl.gov/</a></p><h3>Citing MG-RAST</h3><a name='section:MG-RAST-citation'></a><p style='clear: both;'>If you use our service, please cite: </p><p style='clear: both;'>The Metagenomics RAST server &hyphen;- A public resource for the automatic phylogenetic and functional analysis of metagenomes </p><p style='clear: both;'>F. Meyer, D. Paarmann, M. D'Souza, R. Olson , E. M. Glass, M. Kubal, T. Paczian , A. Rodriguez , R. Stevens, A. Wilke, J. Wilkening, and R. A. Edwards </p><p style='clear: both;'>BMC Bioinformatics 2008, 9:386 </p><p style='clear: both;'><a href="http://www.biomedcentral.com/1471-2105/ 9/386" target=_blank>http://www.biomedcentral.com/1471-2105/ 9/386</a>.</p><h3>Version history</h3><h4>Version 1</h4><p style='clear: both;'>The original version of MG-RAST was developed in 2007 by Folker Meyer, Andreas Wilke, Daniel Paarman, Bob Olson, and Rob Edwards. It relied heavily on the <span class="glossary" data-toggle="popover" data-title="SEED" data-content="The SEED effort led by Ross Overbeek is a systematic annotation effort for prokaryotic genomes using Subsystems">SEED<sup>[?]</sup></span><a href="#citation_17" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[17]</a> environment and allowed upload of preprocessed 454 and Sanger data.</p><h4>Version 2</h4><p style='clear: both;'>Version 2, released in 2008, had numerous improvements. It was optimized to handle full-sized 454 datasets and was the first version of MG-RAST that was not fully <span class="glossary" data-toggle="popover" data-title="SEED" data-content="The SEED effort led by Ross Overbeek is a systematic annotation effort for prokaryotic genomes using Subsystems">SEED<sup>[?]</sup></span> based.</p><p style='clear: both;'>Version 2.0 used BLASTX analysis for both gene prediction and functional classification.</p><h4>Version 3</h4><p style='clear: both;'>While version 2 of MG-RAST was widely used, it was limited to datasets smaller than a few hundred megabases, and comparison of samples was limited to pairwise comparisons. Version 3 is not based on <span class="glossary" data-toggle="popover" data-title="SEED" data-content="The SEED effort led by Ross Overbeek is a systematic annotation effort for prokaryotic genomes using Subsystems">SEED<sup>[?]</sup></span> technology; instead, it uses the SEED subsystems as a preferred data source.</p><p style='clear: both;'>Starting with version 3, MG-RAST moved to github.</p><h3>Comparison of versions 2 and 3</h3><p style='clear: both;'>In the 3.0 version, datasets of tens of gigabases can be annotated, and comparison of taxa or functions that differ between samples is now limited only by the available screen real estate. Figure <a href="#fig:mgrastv2VSv3" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">mgrastv2VSv3</a> shows a comparison of the analytical and computational approaches used in MG-RAST v2 and v3. The major changes are the inclusion of a dedicated gene-calling stage using FragGenescan <a href="#citation_16" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[16]</a>, clustering of predicted proteins at 90% identified by using uclust <a href="#citation_5" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[5]</a>, and the use of BLAT <a href="#citation_13" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[13]</a> for the computation of similarities. Together with changes in the underlying infrastructure, this version has allowed dramatic scaling of the analysis with the limited hardware available.</p><p style='clear: both;'>Similar to version 2.0, the new version of MG-RAST does not pretend to know the correct parameters for the transfer of annotations. Instead, users are empowered to choose the best parameters for their datasets.</p><a name='fig:mgrastv2VSv3'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/mgrastv2VSv3.png");' src='Images/mgrastv2VSv3.png'></div><blockquote><p><small>Overview of processing pipeline in (left) MG-RAST v2 and (right) MG-RAST v3. In the old pipeline, metadata was rudimentary, compute steps were performed on individual reads on a 40-node cluster that was tightly coupled to the system, and similarities were computed by BLAST to yield abundance profiles that could then be compared on a per sample or per pair basis. In the new pipeline, rich metadata can be uploaded, normalization and feature prediction are performed, faster methods such as BLAT are used to compute similarities, and the resulting abundance profiles are fed into downstream pipelines on the cloud to perform community and metabolic reconstruction and to allow queries according to rich sample and functional metadata.</small></p></blockquote><p style='clear: both;'>The new version of MG-RAST represents a rethinking of core processes and data products, as well as new user interface metaphors and a redesigned computational infrastructure. MG-RAST supports a variety of user-driven analyses, including comparisons of many samples, previously too computationally intensive to support for an open user community.</p><p style='clear: both;'>Scaling to the new workload required changes in two areas: the underlying infrastructure needed to be rethought, and the analysis pipeline needed to be adapted to address the properties of the newest sequencing technologies.</p><h3>The MG-RAST team</h3><p style='clear: both;'>MG-RAST was started by Rob Edwards and Folker Meyer in 2007.</p><p style='clear: both;'>The MG-RAST team has significantly expanded in the past few years.</p><p style='clear: both;'>The current team is listed below.</p><ul><li>Andreas Wilke</li><li>Elizabeth M. Glass</li><li>Jared Bischof</li><li>Daniel Braithwaite</li><li>Mark D'Souza</li><li>Wolfgang Gerlach</li><li>Travis Harrison</li><li>Kevin Keegan</li><li>Hunter Matthews</li><li>Tobias Paczian</li><li>Wei Tang</li><li>William L. Trimble</li><li>Narayan Desai</li></ul><h4>Past members of the MG-RAST team</h4><p style='clear: both;'>The following people were associated with MG-RAST in the past:</p><ul><li>   Daniel Paarmann, 2007-2008</li><li>   Rob Edwards, 2007-2008</li><li>   Mike Kubal, 2007-2008</li><li>   Alex Rodriguez, 2007-2008</li><li>   Bob Olson, 2007-2009</li><li>   Daniela Bartels, 2007-2011</li><li>   Yekaterina Dribinsky, 2011</li></ul><h3>Contacting the MG-RAST team and help desk</h3><p style='clear: both;'>See Section <a href="#section:contact-mgrast" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">contact-mgrast</a>.</p></section><section id='navitem_1'><h2>Under the hood: The MG-RAST technology platform and pipeline</h2><p style='clear: both;'>One key aspect of scaling MG-RAST to large numbers of modern NGS datasets is the use of cloud computing<span class="footnote" data-toggle="popover" data-content="We use the term <i>cloud</i> as a shortcut for Infrastructure as a Service (IaaS)."><sup>[1]</sup></span>, which decouples MG-RAST from its previous dedicated hardware resources. Using our task server AWE <a href="#citation_28" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[28]</a> and the SHOCK data management system developed alongside it, we have updated our underlying computational platform using a purpose-built software platform optimized for large-scale sequence analysis.</p><p style='clear: both;'>The new analytical pipeline for MG-RAST v3 is encapsulated and separated from the data store, enabling far greater scalability.</p><p style='clear: both;'>Combined, these changes in infrastructure and pipeline have made version 3 of MG-RAST 750 times faster than version 2.</p><h3>Data model</h3><p style='clear: both;'>The MG-RAST data model (see Figure <a href="#fig:data-model" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">data-model</a>) has changed dramatically in order to handle the size of modern next-generation sequencing datasets. In particular, we have made a number of choices that reduce the computational and storage burden.</p><p style='clear: both;'>We note that the size of the derived data products for a next-generation dataset in MG-RAST is typically about 10x the size of the actual dataset. Individual datasets now may be as large as a terabase<span class="footnote" data-toggle="popover" data-content="This would be for several metagenomes that are part of the JGI Prairie pilot."><sup>[1]</sup></span>, with the on-disk footprint significantly larger than the basepair count because of the inefficient nature of FASTQ files, which  basically double the on-disk size for FASTQ representations.</p><ul><li>Abundance profiles.<br>Using abundance profiles, where we count the number of occurrences of function or taxon per metagenomic dataset, is one important factor that keeps the datasets manageable. Instead of growing the dataset sizes (often with several hundred million individual sequences per dataset), the data products now are more or less static in size.</li><li>Single similarity computing step per feature type.<br>By running exactly one similarity computation for proteins and another one for <span class="glossary" data-toggle="popover" data-title="rRNA" data-content="ribosomal ribonucleic acid">rRNA<sup>[?]</sup></span> features, we have limited the computational requirements.</li></ul><a name='fig:data-model'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/data-model.png");' src='Images/data-model.png'></div><blockquote><p><small>MG-RAST v3 data model.</small></p></blockquote><p style='clear: both;'>As shown in Figure <a href="#fig:data-model" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">data-model</a>, MG-RAST relies on abundance profiles to capture information for each metagenome.</p><p style='clear: both;'>The following abundance profiles are calculated for every metagenome.</p><ul><li>MD5s &hyphen;<br>number of sequences (clusters) per database entry in the M5nr.</li><li>functions &hyphen;<br>summary of all the MD5s that match a given function.</li><li>ontologies &hyphen;<br>summary of all the MD5s that match a given hierarchy entry.</li><li>organisms &hyphen;<br>summary of all MD5s that match a given taxon entry.</li></ul><p style='clear: both;'>The static helper tables (show in blue in Figure <a href="#fig:mgrast_analysis-schema" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">mgrast_analysis-schema</a>) help</p><p style='clear: both;'>keep the main tables smaller, by normalizing and providing integer representations for the entities in the abundance profiles.</p><a name='fig:mgrast_analysis-schema'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/mgrast_analysis-schema.png");' src='Images/mgrast_analysis-schema.png'></div><blockquote><p><small>Analysis database schema: static objects (blue) and per metagenome (variable) objects (green).</small></p></blockquote><a name='fig:mgrast-v3-pipeline'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/mgrastv3pipeline.png");' src='Images/mgrastv3pipeline.png'></div><blockquote><p><small>Details of the analysis pipeline for MG-RAST version 3</small></p></blockquote><h3>Details on the new MG-RAST pipeline</h3><a name='section:mgrast_pipeline_details'></a><p style='clear: both;'>The pipeline shown in Figure <a href="#fig:mgrast-v3-pipeline" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">mgrast-v3-pipeline</a> contains a significant number of improvements over version 3.0.</p><p style='clear: both;'>Using the M5nr <a href="#citation_29" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[29]</a> (an MD5 nonredundant database), the new pipeline computes results against many reference databases instead of only <span class="glossary" data-toggle="popover" data-title="SEED" data-content="The SEED effort led by Ross Overbeek is a systematic annotation effort for prokaryotic genomes using Subsystems">SEED<sup>[?]</sup></span>.</p><p style='clear: both;'>Several key algorithmic improvements were needed to support the flood of user-generated data (see Figure <a href="#fig:mgrast-job-sizes" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">mgrast-job-sizes</a>). Using dedicated software to perform gene prediction instead of using a similarity-based approach reduces runtime requirements. The additional clustering of proteins at 90% identity reduces data while preserving biological signals.</p><p style='clear: both;'>We also restrict the pipeline annotations only to protein coding genes and ribosomal RNA (<span class="glossary" data-toggle="popover" data-title="rRNA" data-content="ribosomal ribonucleic acid">rRNA<sup>[?]</sup></span>) genes.</p><p style='clear: both;'>Below we describe each step of the pipeline in some detail. All datasets generated by the individual stages of the processing pipeline are made available as downloads. Appendix <a href="#chapter:downloads" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">downloads</a> lists the available files for each dataset.</p><a name='fig:mgrast-job-sizes'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 4in; cursor: pointer;' onclick='window.open("Images/MG-RAST-job-sizes.png");' src='Images/MG-RAST-job-sizes.png'></div><blockquote><p><small>Sizes of MG-RAST jobs per month in gigabasepairs from 2007 to 2013.</small></p></blockquote><h4>Preprocessing</h4><p style='clear: both;'>After upload, data is preprocessed by using SolexaQA <a href="#citation_25" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[25]</a> to trim low-quality regions from FASTQ data. Platform-specific approaches are used for 454 data submitted in FASTA format: reads more than than two standard deviations away from the mean read length are discarded following <a href="#citation_8" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[8]</a>. All sequences submitted to the system are available, but discarded reads will not be analyzed further.</p><h4>Dereplication</h4><p style='clear: both;'>For shotgun metagenome and shotgun metatranscriptome datasets we perform a dereplication step.</p><p style='clear: both;'>We use a simple k-mer approach to rapidly identify all 20 character prefix identical sequences.</p><p style='clear: both;'>This step is required in order to remove Artificial Duplicate Reads (<span class="glossary" data-toggle="popover" data-title="ADR" data-content="Artificial duplicate read">ADR<sup>[?]</sup></span>s) <a href="#citation_7" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[7]</a>. Instead of simply discarding the ADRs, we set them aside and use them later for error estimation.</p><p style='clear: both;'>We note that dereplication is not suitable for amplicon datasets that are likely to share common prefixes.</p><h4>DRISEE</h4><a name='section:DRISEE'></a><p style='clear: both;'>MG-RAST v3 uses DRISEE (Duplicate Read Inferred Sequencing Error Estimation) <a href="#citation_12" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[12]</a> to analyze the sets of Artificial Duplicate Reads (<span class="glossary" data-toggle="popover" data-title="ADR" data-content="Artificial duplicate read">ADR<sup>[?]</sup></span>s) <a href="#citation_7" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[7]</a> and determine the degree of variation among prefix-identical sequences derived from the same template. See Section <a href="#DRISEEDETAIL" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">DRISEEDETAIL</a> for details.</p><h4>Screening</h4><p style='clear: both;'>The pipeline provides the option of removing reads that are near-exact matches to the genomes of a handful of model organisms, including fly, mouse, cow, and human. The screening stage uses Bowtie <a href="#citation_14" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[14]</a> (a fast, memory-efficient, short read aligner), and only reads that do not match the model organisms pass into the next stage of the annotation pipeline.</p><p style='clear: both;'>Note that this option will remove all reads similar to the human genome and render them inaccessible. This decision was made in order to avoid storing any human DNA on MG-RAST.</p><h4>Gene calling</h4><p style='clear: both;'>The previous version of MG-RAST used similarity-based gene predictions, an approach that is significantly more expensive computationally than de novo gene prediction. After an in-depth investigation of tool performance <a href="#citation_19" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[19]</a>, we have moved to a machine learning approach: FragGeneScan <a href="#citation_16" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[16]</a>. Using this approach, we can now predict coding regions in DNA sequences of 75 bp and longer. Our novel approach also enables the analysis of user-provided assembled contigs.</p><p style='clear: both;'>We note that FragGeneScan is trained for prokaryotes only. While it will identify proteins for eukaryotic sequences, the results should be viewed as more or less random.</p><h4>AA clustering</h4><p style='clear: both;'>MG-RAST builds clusters of proteins at the 90% identity level using the uclust <a href="#citation_5" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[5]</a> implementation in QIIME <a href="#citation_4" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[4]</a> preserving the relative abundances. These clusters greatly reduce the computational burden of comparing all pairs of short reads, while clustering at 90% identity preserves sufficient biological signals.</p><h4>Protein identification</h4><p style='clear: both;'>Once created, a representative (the longest sequence) for each cluster is subjected to similarity analysis. Instead of BLAST we use sBLAT, an implementation of the BLAT algorithm <a href="#citation_13" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[13]</a>, which we parallelized using OpenMP <a href="#citation_23" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[23]</a> for this work.</p><p style='clear: both;'>Once the similarities are computed, we present reconstructions of the species content of the sample based on the similarity results. We reconstruct the putative species composition of the sample by looking at the phylogenetic origin of the database sequences hit by the similarity searches.</p><h4>Annotation mapping</h4><p style='clear: both;'>Sequence similarity searches are computed against a protein database derived from the M5nr <a href="#citation_29" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[29]</a>, which provides nonredundant integration of many databases: GenBank,<a href="#citation_3" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[3]</a>, <span class="glossary" data-toggle="popover" data-title="SEED" data-content="The SEED effort led by Ross Overbeek is a systematic annotation effort for prokaryotic genomes using Subsystems">SEED<sup>[?]</sup></span> <a href="#citation_17" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[17]</a>, IMG <a href="#citation_26" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[26]</a>, UniProt <a href="#citation_40" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[40]</a>, KEGG <a href="#citation_11" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[11]</a>, and eggNOGs <a href="#citation_10" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[10]</a>. Unlike MG-RAST v2, which relied solely on SEED, MG-RAST now supports many complementary views into the data with one similarity search, including different functional hierarchies: SEED <span class="glossary" data-toggle="popover" data-title="SEED" data-content="The SEED effort led by Ross Overbeek is a systematic annotation effort for prokaryotic genomes using Subsystems">SEED<sup>[?]</sup></span>s, IMG terms, COG <a href="#citation_27" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[27]</a>, eggNOGs <a href="#citation_10" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[10]</a>, and ontologies such as GO (Gene Ontology Consortium, 2013). Users can easily change views without recomputation. For example, COG and KEGG views can be displayed, which both show the relative abundances of histidine biosynthesis in a dataset of four cow rumen metagenomes.</p><h4>Abundance profiles</h4><p style='clear: both;'>Abundance profiles are the primary data product that MG-RAST's user interface uses to display information on the datasets.</p><p style='clear: both;'>Using the abundance profiles, the MG-RAST system defers making a decision on when to transfer annotations. Since there is no well-defined threshold that is acceptable for all use cases, the abundance profiles contain all similarities and require their users to set cut-off values.</p><p style='clear: both;'>The threshold for annotation transfer can be set by using the following parameters:</p><p style='clear: both;'>e-value,</p><p style='clear: both;'>percent identity, and</p><p style='clear: both;'>minimal alignment length.</p><p style='clear: both;'>The taxonomic profiles use the NCBI taxnomy. All taxonomic information is projected against this data.</p><p style='clear: both;'>The functional profiles are available for data sources that provide hierarchical information. These currently comprise the following.</p><ul><li><span class="glossary" data-toggle="popover" data-title="SEED" data-content="The SEED effort led by Ross Overbeek is a systematic annotation effort for prokaryotic genomes using Subsystems">SEED<sup>[?]</sup></span> <span class="glossary" data-toggle="popover" data-title="SEED" data-content="The SEED effort led by Ross Overbeek is a systematic annotation effort for prokaryotic genomes using Subsystems">SEED<sup>[?]</sup></span>s<br>The SEED subsystems<a href="#citation_17" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[17]</a> represent an independent reannotation effort that powers, for example,  the RAST<a href="#citation_38" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[38]</a> effort. Manual curation of subsystems makes them an extremely valuable data source.Subsystems represent a four-level hierarchy:</li><li>Subsystem level 1 &hyphen; highest level</li><li>Subsystem level 2 &hyphen; </li><li>Subsystem level 3 &hyphen; similar to a KEGG pathway</li><li>Subsystem level 4 &hyphen; actual functional assignment to the feature in question<br>The page at <a href="http://pubseed.theseed.org/SubsysEditor.cgi" target=_blank>http://pubseed.theseed.org/SubsysEditor.cgi</a> allows browsing the subsystems.</li><li>KEGG Orthologs<br>We use the KEGG<a href="#citation_11" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[11]</a> enzyme number hierarchy to implement a four-level hierarchy.</li><li>KEGG level 1 &hyphen; first digit of the EC number (EC:X.*.*.*)</li><li>KEGG level 2 &hyphen; first two digits of the EC number (EC:X.Y.*.*)</li><li>KEGG level 3 &hyphen; first three digits of the EC number (EC:X:Y:Z:.*)</li><li>KEGG level 4 &hyphen; entire four digits EC number<br>We note that KEGG data is no longer available for free download. We thus have to rely on using the latest freely downloadable version of the data.The high-level KEGG categories are as follows.</li><li>Cellular Processes</li><li>Environmental Information Processing</li><li>Genetic Information Processing</li><li>Human Diseases</li><li>Metabolism</li><li>Organizational Systems</li><li>COG and EGGNOG Categories<br>The high-level COG and EGGNOG categories are as follows.</li><li>Cellular Processes</li><li>Information Storage and Processing</li><li>Metabolism</li></ul><h3>The rRNA pipeline</h3><p style='clear: both;'><span class="glossary" data-toggle="popover" data-title="rRNA" data-content="ribosomal ribonucleic acid">rRNA<sup>[?]</sup></span> reads are identified by using a simple rRNA detection pipeline and are searched in a separate flow in the pipeline.</p><h4>rRNA detection</h4><p style='clear: both;'>An initial BLAT <a href="#citation_13" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[13]</a> search against a reduced RNA database efficiently identifies RNA. The reduced database is a 90% identity clustered version of the SILVA database and is used to rapidly identify sequences with similarities to ribosomal RNA.</p><h4>rRNA clustering</h4><p style='clear: both;'>The rRNA-similar reads are then clustered at 97% identity, and the longest sequence is picked as the cluster representative.</p><h4>rRNA identification</h4><p style='clear: both;'>A BLAT similarity search for the longest cluster representative is performed against the M5rna database which integrates SILVA<a href="#citation_41" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[41]</a>, Greengenes<a href="#citation_42" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[42]</a>, and RDP.</p><h3>Quality assessment</h3><a name='section:Quality'></a><p style='clear: both;'>The MG-RAST pipeline offers a variety of summaries of technical aspects of the sequence quality to enable sequence data triage.  These tools include DRISEE for estimating sequence error, summaries of the spectra of long kmers, and visualizations of the base caller output.</p><h4>DRISEE</h4><a name='DRISEEDETAIL'></a><p style='clear: both;'>DRISEE <a href="#citation_12" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[12]</a> is a method for measuring sequencing error in whole-genome shotgun metagenomic sequence data that is independent of sequencing technology and overcomes many of the shortcomings of Phred. It utilizes artificial duplicate reads (ADRs) to generate internal sequence standards from which an overall assessment of sequencing error in a sample is derived. </p><p style='clear: both;'>The current implementation of DRISEE is not suitable for amplicon sequencing data or other samples that may contain natural duplicated sequences (e.g., eukaryotic DNA where gene duplication and other forms of highly repetitive sequences are common) in high abundance.</p><p style='clear: both;'>DRISEE results are presented on the Overview page for each MG-RAST sample for which a DRISEE profile can be determined.</p><p style='clear: both;'>Total DRISEE error presents the overall DRISEE-based assessment of the sample as a percent error:</p><p style='clear: both;'><div class='math'>Total  DRISEE  Error = base_errors / total_bases * 100</div></p><p style='clear: both;'> where <b>base_errors</b> refers to the sum of DRISEE-detected errors and <b>total_bases</b> refers to the sum of all bases considered by DRISEE.</p><p style='clear: both;'>Beneath the Total DRISEE Error, a barchart indicates the error for the sample (the red vertical bar) as well as the minimum (barchart initial value), maximum (barchart final value), mean (&mu;), mean +/- one standard deviation (&sigma;), and mean +/- two standard deviations (2&sigma;) Total DRISEE Errors observed among all samples in MG-RAST for which a DRISEE profile has been computed. </p><p style='clear: both;'>The DRISEE plot presents a more detailed view of the DRISEE profile; the DRISEE percent error is displayed per base. Individual errors (A,T,C,G, and N substitution rates as well as the InDel rate) are presented as well as a cumulative total.</p><p style='clear: both;'>Users can download DRISEE values as a tab-separated file. The first line of the file contains headers for the values in the second line. The second line contains DRISEE percent error values for A substitutions (A_err), T substitutions (T_err), C substitutions (C_err), G substitutions (G_err), N substitutions (N_err), insertions and deletions (InDel_err), and the Total DRISEE Error. The third line indicates headers for all remaining lines. Rows 4 and 4+ present the DRISEE counts for the indexed position across all considered bins of ADRs. Column values represent the number of reads that match an A,T,C,G,N, or InDel at the indicated position relative to the appropriate consensus sequence followed by the number of reads that do not match an A,T,C,G,N, or InDel.</p><h4>Kmer profiles</h4><p style='clear: both;'>kmer digests are an annotation-independent method for describing sequence datasets that can support inferences about genome size and coverage. Here the Overview page presents several visualizations, evaluated at k=15:</p><p style='clear: both;'>the kmer spectrum, kmer rank abundance, and ranked kmer consumed. All three graphs represent the same spectrum, but in different ways. The kmer spectrum plots the number of distinct kmers against kmer coverage; the kmer coverage is equivalent to number of observations of each kmer. The kmer rank abundance plots the relationship between kmer coverage and the kmer rankâ answering the question "What is the coverage of the nth most-abundant kmer?". Ranked kmer consumed plots the largest fraction of the data explained by the nth most-abundant kmers only.</p><h4>Nucleotide histograms</h4><p style='clear: both;'>Nucleotide histograms are graphs showing the fraction of base pairs of each type (A, C, G, T, or ambiguous base "N") at each position starting from the beginning of each read.</p><p style='clear: both;'>Amplicon datasets (see Figure <a href="#fig:nucleotide-hist-amplicon" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">nucleotide-hist-amplicon</a>) should show biased distributions of bases at each position, reflecting both conservation and variability in the recovered sequences:</p><a name='fig:nucleotide-hist-amplicon'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 4in; cursor: pointer;' onclick='window.open("Images/nucleotide-hist-amplicon.png");' src='Images/nucleotide-hist-amplicon.png'></div><blockquote><p><small>Nucleotide histogram with biased distributions typical for an amplicon dataset.</small></p></blockquote><p style='clear: both;'>Shotgun datasets should have roughly equal proportions of A, T, G and C basecalls, independent of position in the read as shown in Figure <a href="#fig:nucleotide-hist-ok" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">nucleotide-hist-ok</a>.</p><a name='fig:nucleotide-hist-ok'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 4in; cursor: pointer;' onclick='window.open("Images/nucleotide-hist-ok.png");' src='Images/nucleotide-hist-ok.png'></div><blockquote><p><small>Nucleotide histogram showing ideal distributions typical for a shotgun metagenome.</small></p></blockquote><p style='clear: both;'>Vertical bars at the beginning of the read indicate untrimmed (see Figure <a href="#fig:nucleotide-hist-barcodes" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">nucleotide-hist-barcodes</a>), contiguous barcodes. Gene calling via FragGeneScan <a href="#citation_16" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[16]</a> and <span class="glossary" data-toggle="popover" data-title="RNA" data-content="Ribonucleic acid">RNA<sup>[?]</sup></span> similarity searches are not impacted by the presence of barcodes. However, if a significant fraction of the reads is consumed by barcodes, it reduces the biological information contained in the reads.</p><a name='fig:nucleotide-hist-barcodes'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 4in; cursor: pointer;' onclick='window.open("Images/nucleotide-hist-barcodes.png");' src='Images/nucleotide-hist-barcodes.png'></div><blockquote><p><small>Nucleotide histogram with untrimmed barcodes.</small></p></blockquote><p style='clear: both;'>If a shotgun dataset has clear patterns in the data, these indicate likely contamination with artificial sequences.</p><p style='clear: both;'>The dataset shown in see Figure <a href="#fig:nucleotide-with-contamination" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">nucleotide-with-contamination</a> had a large fraction of adapter dimers.</p><a name='fig:nucleotide-with-contamination'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 4in; cursor: pointer;' onclick='window.open("Images/nucleotide-with-contamination.png");' src='Images/nucleotide-with-contamination.png'></div><blockquote><p><small>Nucleotide histogram with contamination.</small></p></blockquote><h3>Best hit, representative hit, and lowest common ancestor interpretation</h3><a name='section:hit-types'></a><p style='clear: both;'>MG-RAST searches the nonredundant M5nr and M5rna databases in which each sequence is unique. These two databases are built from multiple sequence database sources, and the individual sequences may occur multiple times in different strains and species (and sometimes genera) with 100% identity. In these circumstances, choosing the "right'' taxonomic information is not a straightforward process.</p><p style='clear: both;'>To optimally serve a number of different use cases, we have implemented three methods&hyphen;best hit, representative hit, and lowest common ancestor&hyphen;-for </p><p style='clear: both;'>end users to determine the number of hits</p><p style='clear: both;'>(occurrences of the input sequence in the database)</p><p style='clear: both;'>reported for a given sequence in their dataset.</p><h4>Best hit</h4><p style='clear: both;'>The best hit classification reports the functional and taxonomic annotation of the best hit in the M5nr for each feature. In those cases where the similarity search yields multiple same-scoring hits for a feature, we do not choose any single "correct'' label. For this reason we have decided to double count all annotations with identical match properties and leave determination of truth to our users. While this approach aims to inform about the functional and taxonomic potential of a microbial community by preserving all information, subsequent analysis can be biased because of a single feature having multiple annotations, leading to inflated hit counts. For users looking for a specific species or function in their results, the best hit classification is likely what is wanted.</p><h4>Representative hit</h4><p style='clear: both;'>The representative hit classification selects a single, unambiguous annotation for each feature. The annotation is based on the first hit in the homology search and the first annotation for that hit in our database. This approach makes counts additive across functional and taxonomic levels and thus allows, for example, the comparison of functional and taxonomic profiles of different metagenomes.</p><h4>Lowest Common Ancestor (LCA)</h4><a name='section:LCA'></a><p style='clear: both;'>To avoid the problem of multiple taxonomic annotations for a single feature, we provide taxonomic annotations based on the widely used LCA method introduced by MEGAN <a href="#citation_9" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[9]</a>. In this method all hits are collected that have a bit score close to the bit score of the best hit. The taxonomic annotation of the feature is then determined by computing the LCA of all species in this set. This replaces all taxonomic annotations from ambiguous hits with a single higher-level annotation in the NCBI taxonomy tree.</p><h4>Comparison of methods</h4><p style='clear: both;'>Users should be aware that the number of hits might be inflated if the best hit filter is used or that a favorite species might be missing despite a similar sequence similarity result if the representative hit filter is used (in fact, even if a 100% identical match to a favorite species exists).</p><p style='clear: both;'>One way to consider both the best hit and representative hit is that they overinterpret the available evidence. With the LCA classifier function, on the other hand, any input sequence is classified only down to a trustworthy taxonomic level. While naively this seems to be the best function to choose in all cases because it classifies sequences to varying depths, the approach causes problems for downstream analysis tools that might rely on everything being classified to the same level.</p><h3>Numbers of annotations vs. number of reads</h3><a name='section:annotation_numbers'></a><p style='clear: both;'>The MG-RAST v3 annotation pipeline does not usually provide a single annotation for each submitted fragment of DNA. Steps in the pipeline map one read to multiple annotations and one annotation to multiple reads. These steps are a consequence of genome structure, pipeline engineering, and the character of the sequence databases that MG-RAST uses for annotation.</p><p style='clear: both;'>The first step that is not one-to-one is gene prediction. Long reads (> 400bp) and contigs can contain pieces of two or more microbial genes; when the gene caller makes this prediction, the multiple predicted protein sequences (called fragments) are annotated separately.</p><p style='clear: both;'>An intermediate clustering step identifies sequences at 90% amino acid identity and performs one search for each cluster. Sequences that do not fall into clusters are searched separately. The "abundance'' column in the MG-RAST tables presents the estimate of the number of sequences that contain a given annotation, found by multiplying each selected database match (hit) by the number of representatives in each cluster.</p><p style='clear: both;'>The final step that is not one-to-one is the annotation process itself. Sequences can exist in the underlying data sources many times with different labels. When those sequence are the best hit similarity, we do not have a principled way to choosing the "correct'' label. For this reason we have decided to double count these annotations and leave determination of truth to our users. Note: Even when considering a single data source, double-counting can occur depending on the consistency of annotations.</p><p style='clear: both;'>Also note: Hits refer to the number of unique database sequences that were found in the similarity search, <b>not</b> the number of reads. The hit count can be smaller than the number of reads because of clustering or larger due to double counting.</p><h3>Metadata</h3><a name='section:metadata'></a><p style='clear: both;'>MG-RAST is both an analytical platform and a data integration system. To enable data reuse, for example for meta-analyses, we require that all data being made publicly available to third parties contain at least minimal metadata. The MG-RAST team has decided to follow the minimal checklist approach used by the Genomics Standards Consortium (GSC)<a href="#citation_6" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[6]</a>.</p><p style='clear: both;'>While the GSC provides a GCDML <a href="#citation_35" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[35]</a> encoding, this XML-based format is more useful to programmers than to end users submitting data.</p><p style='clear: both;'>We have therefore elected to use spreadsheets to transport metadata. Specifically we use MIxS (Minimum information about any (x) sequence (MIxS) and MIMARKS (Minimum Information about a MARKer gene Survey) to encode minimal metadata <a href="#citation_22" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[22]</a>.</p><p style='clear: both;'>The metadata describe the origins of samples and provide details on the generation of the sequence data. While the GSC checklist aims at capturing a minimum of information, MG-RAST can handle additional metadata if supplied by the user. The metadata is stored in a simple key value format and is displayed on the Metagenome Overview page.</p><p style='clear: both;'>Once uploaded, the metadata spreadsheets are validated automatically, and users are informed of any problems.</p><p style='clear: both;'>The presence of metadata enables discovery by end users using contextual metadata. Users can perform searches such as "retrieve soil samples from the continental U.S.A.'' If the users have added additional metadata (domain specific extension), additional queries are enabled: for example, "restrict the results to soils with a specific pH".</p></section><section id='navitem_2'><h2>MG-RAST v3 web interface</h2><p style='clear: both;'>The MG-RAST system provides a rich web user interface that covers all aspects of the metagenome analysis, from data upload to ordination analysis. The web interface can also be used for data discovery. Metagenomic datasets can be easily selected individually or on the basis of filters such as technology (including read length), quality, sample type, and keyword, with dynamic filtering of results based on similarity to known reference proteins or taxonomy. For example, a user might want to perform a search such as "phylum eq `actinobacteria' and function in `KEGG pathway Lysine Biosynthesis'â and sample in `Ocean' " to extract sets of reads matching the appropriate functions and taxa across metagenomes. The results can be displayed in familiar formats, including bar charts, trees that incorporate abundance information, heatmaps, or principal components analyses, or exported in tabular form. The raw or processed data can be recovered via download pages. Metabolic reconstructions based on mapping to KEGG pathways are also provided.</p><p style='clear: both;'>Sample selection is crucial for understanding large-scale patterns when multiple metagenomes are compared. Accordingly, MG-RAST supports MIxS and MIMARKS (Yilmaz, 2011) (as well as domain-specific plug-ins for specialized environments not extending the minimal GSC standards); several projects, including TerraGenome, HMP, TARA, and EMP, use these GSC standards, enabling standardized queries that integrate new samples into these massive datasets. An example query using the metadata browser, enabling the user to interrogate the existing pool of public datasets for a biome of interest (e.g., hot springs) and performing comparisons and a search for organisms encoding a specific gene function (e.g., beta-lactamase or aldo/keto reductase) is given in</p><p style='clear: both;'>Figure <a href="#fig:quad-chart-analysis-example" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">quad-chart-analysis-example</a>.</p><p style='clear: both;'>One key aspect of the MG-RAST approach is the creation of smart data products enabling the user at the time of analysis to determine the best parameters for, for example, a comparison between samples. This is done without the need for recomputation of results.</p><a name='fig:quad-chart-analysis-example'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/quad-chart-analysis-example.png");' src='Images/quad-chart-analysis-example.png'></div><blockquote><p><small>(a) Using the web interface for a search of metagenomes for microbial mats in hotsprings (GSC-MIMS-Keywords Biome="hotspring; microbial mat"), we find 6 metagenomes (refs: 4443745.3, 4443746.3, 4443747.3, 4443749.3, 4443750.3, 4443762.3). (b) Initial comparison reveals some differences in protein functional class abundance (using <span class="glossary" data-toggle="popover" data-title="SEED" data-content="The SEED effort led by Ross Overbeek is a systematic annotation effort for prokaryotic genomes using Subsystems">SEED<sup>[?]</sup></span> subsystens level 1). (c) From the PCoA plot using normalized counts of functional <span class="glossary" data-toggle="popover" data-title="SEED" data-content="The SEED effort led by Ross Overbeek is a systematic annotation effort for prokaryotic genomes using Subsystems">SEED<sup>[?]</sup></span> <span class="glossary" data-toggle="popover" data-title="SEED" data-content="The SEED effort led by Ross Overbeek is a systematic annotation effort for prokaryotic genomes using Subsystems">SEED<sup>[?]</sup></span>&hyphen;based functional annotations (level 2) and Bray-Curtis as metric, we attempt to find differences between two similar datasets (MG-RAST-IDs: 444749.3, 4443762.3). (d) Using exported tables with functional annotations and taxonomic mapping, we analyze the distribution of organisms observed to contain beta-lactamase and plot the abundance per species for two distinct samples.</small></p></blockquote><h3>Technical details</h3><p style='clear: both;'>This section briefly presents information about browsers and downloading. </p><h4>Browser requirements</h4><p style='clear: both;'>The current web interface for MG-RAST is being developed for recent versions of Firefox.</p><p style='clear: both;'>If you are using another browser, please understand that some or all of the web site will not function.</p><p style='clear: both;'>We realize that Firefox may not be your favorite (or institutionally prescribed) browser, but writing</p><p style='clear: both;'>interactive web sites for many browsers is hard. While we are aiming to create a multibrowser version of the web interface, the current version is limited to Firefox.</p><h4>Downloading figures</h4><p style='clear: both;'>Almost all figures and tables are downloadable into either graphics or spreadsheets. Please look for</p><p style='clear: both;'>a download chart data link next to the graphic.</p><h3>Sitemap for MG-RAST</h3><a name='section:sitemap'></a><p style='clear: both;'>The MG-RAST web site (as shown in Figure <a href="#fig:sitemap" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">sitemap</a>) is complex and offers a lot of</p><p style='clear: both;'>different options.</p><p style='clear: both;'> The site at <a href="http://metagenomics.anl.gov" target=_blank>http://metagenomics.anl.gov</a> has five main pages</p><p style='clear: both;'>and a home page,</p><p style='clear: both;'>shown in blue in Figure <a href="#fig:sitemap" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">sitemap</a>.</p><ul><li>Download page &hyphen; <br>lists all publicly available data for download. The data is structured into projects.</li><li>Browse page &hyphen;<br>allows interactive browsing of all datasets and is powered by metadata.</li><li>Search page &hyphen;<br>allows identifier, taxonomy, and function-driven searches against all public data.</li><li>Analysis page &hyphen;<br>enables in-depth analyses and comparisons between datasets.</li><li>Upload page &hyphen;<br>allows users to provide their samples and metadata to MG-RAST. More details on uploading are below.</li></ul><a name='fig:sitemap'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/sitemap.png");' src='Images/sitemap.png'></div><blockquote><p><small>Sitemap for the MG-RAST version 3 web site. On the site map the main pages are shown in blue, management pages in orange. The green boxes represent pages that are not directly accessible from the home page.</small></p></blockquote><p style='clear: both;'>We note that if you want to create links to the MG-RAST web site, you should use the <i>linkin</i> mechanism instead of linking to any web page directly. All pages intended for users to create external links provide the linkin feature, See Section <a href="#section:linkin" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">linkin</a>.</p><h3>Navigation</h3><a name='section:website-navigation'></a><a name='fig:website-navigation-toolbox'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/website-navigation-toolbox.png");' src='Images/website-navigation-toolbox.png'></div><blockquote><p><small>The navigation toolbox located in the upper right hand corner of every MG-RAST web page allows easy navigation in the system.</small></p></blockquote><p style='clear: both;'>The navigation toolkit provides easy access to the web pages listed in Section <a href="#section:sitemap" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">sitemap</a>. In addition, there are links to:</p><ul><li>the Account Management page &hyphen; change your name, password, email address, and manage personal preferences,</li><li>the Contact Page &hyphen; get in touch with the MG-RAST team, and</li></ul><h3>Upload page</h3><p style='clear: both;'>Data and metadata can be uploaded in the form of spreadsheets along with the sequence data by using both the ftp and the http protocols. The web uploader will automatically split larger files and allow parallel uploads.</p><p style='clear: both;'>MG-RAST supports datasets that are augmented with rich metadata using the standards and technology developed by the GSC.</p><p style='clear: both;'>Each user has a temporary storage location inside the MG-RAST system. This inbox provides temporary storage for data and metadata to be submitted to the system. Using the inbox, users can extract compressed files, convert a number of vendor specific formats to MG-RAST submission-compliant formats, and obtain an <span class="glossary" data-toggle="popover" data-title="MD5" data-content="The MD5 message-digest algorithm is a widely used cryptographic hash function that produces a 128-bit (16-byte) hash value. Specified in RFC 1321, MD5 has been utilized in a wide variety of security applications, and is also commonly used to check data integrity">MD5<sup>[?]</sup></span> checksum for verifying that transmission to MG-RAST has not altered the data.</p><p style='clear: both;'>The web uploader has been optimized for large datasets of over 100 gigabasepairs, often resulting in file sizes in excess of 150 GB.</p><h3>Browse page &hyphen; Metadata-enabled data discovery</h3><p style='clear: both;'>The Browse page lists all datasets visible to the user<span class="footnote" data-toggle="popover" data-content="Datasets in MG-RAST are private by default, but the submitting user has the option of sharing datasets with specific users or  making datasets public."><sup>[1]</sup></span>. This page also provides an overview of the nonpublic datasets submitted by the user or shared with the user.</p><p style='clear: both;'>Figure <a href="#fig:metagenome-browser" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">metagenome-browser</a> shows the interactive metagenome browse table, which provides an interactive graphical means to discover data based on technical data (e.g., sequence type or dataset size) or metadata (e.g., location or biome).</p><a name='fig:metagenome-browser'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/metagenome-browser.png");' src='Images/metagenome-browser.png'></div><blockquote><p><small>Browse page, enabling sorting and data search. Users can select the metadata they wish to view and search. Some of the metadata is hidden by default and can be viewed by clicking on the last column header on the right side of the table and selecting the desired columns; this can also be used to hide unwanted columns.</small></p></blockquote><h3>Project page</h3><p style='clear: both;'>Shown in Figure <a href="#fig:project-page" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">project-page</a>, the project page provides a list of datasets and metadata for a project.</p><p style='clear: both;'>The table at the bottom of the Project page provides access to the individual metagenomes by clicking on the identifiers in the first column. In addition, the final column provides downloads for metadata, submitted data, and the analysis results via the three labelled arrows.</p><a name='fig:project-page'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/project-page.png");' src='Images/project-page.png'></div><blockquote><p><small>Project page, providing a summary of all the datasets in the project and an interface for downloads.</small></p></blockquote><p style='clear: both;'>For the dataset owners the Project page provides an editing capability using a number of menu entries at the top of the page. Figure <a href="#fig:project-page-editing-buttons" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">project-page-editing-buttons</a> shows the available options.</p><ul><li>Share Project &hyphen;<br>make the data in this project available to third parties via sending them access tokens. This also allows users to grant anonymous access to manuscript reviewers for projects which have not yet been made public.</li><li>Add Jobs &hyphen;<br>add additional datasets to this project.</li><li>Edit Project Data &hyphen;<br>edit the contents of this page.</li><li>Upload Info &hyphen;<br>upload information to be displayed on this page.</li><li>Upload MetaData &hyphen;<br>upload a metadata spreadsheet for the project.</li></ul><a name='fig:project-page-editing-buttons'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/project-page-editing-buttons.png");' src='Images/project-page-editing-buttons.png'></div><blockquote><p><small>Buttons displayed by Project page todataset owner.</small></p></blockquote><h3>Overview page</h3><p style='clear: both;'>MG-RAST automatically creates an individual summary page for each dataset. This metagenome overview page provides a summary of the annotations for a single dataset. The page is made available by the automated pipeline once the computation is finished.</p><p style='clear: both;'>This page is a good starting point for looking at a particular dataset. It provides a significant amount of information on technical details and biological content.</p><p style='clear: both;'>The page is intended as a single point of reference for metadata, quality, and data. It also provides an initial overview of the analysis results for individual datasets with default parameters. Further analyses are available on the Analysis page.</p><h4>Technical part of the Overview page &hyphen; Details on sequencing and analysis</h4><p style='clear: both;'>The Overview page provides the MG-RAST ID for a data set, a unique identifier that is usable as accession number for publications. Additional information such as the name of the submitting PI and organization and a user-provided metagenome name are displayed at the top of the page as well. A static URL for linking to the system that will be stable across changes to the MG-RAST web interface is provided as additional information</p><p style='clear: both;'>(Figure <a href="#fig:metagenome-overview" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">metagenome-overview</a>).</p><a name='fig:metagenome-overview'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/metagenome-overview.png");' src='Images/metagenome-overview.png'></div><blockquote><p><small>Top of the metagenome Overview page.</small></p></blockquote><p style='clear: both;'>We provide an automatically generated paragraph of text describing the submitted data and the results computed by the pipeline. By means of the project information we display additional information provided by the data submitters at the time of submission or later.</p><p style='clear: both;'>One of the key diagrams in MG-RAST is the sequence breakdown pie chart (Figure <a href="#fig:classification-pie-chart" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">classification-pie-chart</a>) classifying the submitted sequences submitted into several categories according to their annotation status. As detailed in the description of the MG-RAST v3 pipeline above, the features annotated in MG-RAST are protein coding genes and ribosomal proteins.</p><a name='fig:classification-pie-chart'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 4in; cursor: pointer;' onclick='window.open("Images/classification-pie-chart.png");' src='Images/classification-pie-chart.png'></div><blockquote><p><small>Sequences to the pipeline are classified into one of five categories: grey = failed the QC, red = unknown sequences, yellow = unknown function but protein coding, green = protein coding with known function, and blue = ribosomal RNA. For this example almost 40% of sequences were either filtered by QC or failed to be recognized as either protein coding or ribosomal.</small></p></blockquote><p style='clear: both;'>We note that for performance reasons no other sequence features are annotated by the default pipeline. Other feature types such as small RNAs or regulatory motifs (e.g., CRISPRs <a href="#citation_31" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[31]</a>) not only will require significantly higher computational resources but also are frequently not supported by the unassembled short reads that constitute the vast majority of todays metagenomic data in MG-RAST. The quality of the sequence data coming from next-generation instruments requires careful design of experiments, lest the sensitivity of the methods is greater than the signal-to-noise ratio the data supports.</p><p style='clear: both;'>The overview page also provides metadata for each dataset to the extent that such information has been made available. Metadata enables other researchers to discover datasets and compare annotations. MG-RAST requires standard metadata for data sharing and data publication. This is implemented using the standards developed by the Genomics Standards Consortium. Figure <a href="#fig:GSC-MIxS-checklist-information" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">GSC-MIxS-checklist-information</a> shows the metadata summary for a dataset.</p><a name='fig:GSC-MIxS-checklist-information'></a><p style='clear: both;'>All metadata stored for a specific dataset is available in MG-RAST; we merely display a standardized subset in this table. A link at the bottom of the table ("More Metadata'') provides access to a table with the complete metadata. This enables users to provide extended metadata going beyond the GSC minimal standards. A mechanism to provide community consensus extensions to the minimal checklists and the environmental packages are explicitly encouraged but not required when using MG-RAST.</p><h5>Metagenome quality control</h5><p style='clear: both;'>The analysis flowchart and analysis statistics provide an overview of the number of sequences at each stage in the pipeline (Figure <a href="#fig:analysis-flowchart" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">analysis-flowchart</a>). The text block next to the analysis flowchart presents the numbers next to their definitions.</p><a name='fig:analysis-flowchart'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 4in; cursor: pointer;' onclick='window.open("Images/analysis-flowchart.png");' src='Images/analysis-flowchart.png'></div><blockquote><p><small>Analysis flowchart providing an overview of the fractions of sequences surviving the various steps of the automated analysis. In this case about 43.7% of sequences were filtered during quality control. From the remaining 66,764,893 sequences, 58.9% were predicted to be protein coding, 10.4% hit ribosomal RNA. From the predicted proteins, 79.8% could be annotated with a putative protein function. Of 44.5 million annotated proteins, 85.6% have been assigned to a functional classification (<span class="glossary" data-toggle="popover" data-title="SEED" data-content="The SEED effort led by Ross Overbeek is a systematic annotation effort for prokaryotic genomes using Subsystems">SEED<sup>[?]</sup></span>, COG, eggNOG, KEGG).</small></p></blockquote><h5>Source hits distribution</h5><a name='section:source-hits-distribution'></a><p style='clear: both;'>The source hits distribution shows what percentage of the predicted protein features could be annotated with similarity to a protein of known function and which database those functions were from. In addition, ribosomal RNA genes are mapped to the rRNA databases.</p><p style='clear: both;'>Figure <a href="#fig:source-hits-distribution" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">source-hits-distribution</a> shows the number of features in this dataset that were annotated by the different databases. These include protein databases, protein databases with functional hierarchy information, and ribosomal RNA databases.</p><p style='clear: both;'>In addition this display will print the number of records in the M5nr protein database and in the M5rna ribosomal databases. </p><a name='fig:source-hits-distribution'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/source-hits-distribution.png");' src='Images/source-hits-distribution.png'></div><blockquote><p><small>Graph showing the number of features in this dataset annotated by the different databases.The bars representing annotated reads are colored by e-value range. Different databases have different numbers of hits but can also have different types of annotation data.</small></p></blockquote><h5>Other statistics </h5><p style='clear: both;'>MG-RAST also provides a quick link to other statistics.</p><p style='clear: both;'> For example, the Analysis Statistics and Analysis Flowchart provide sequence statistics for the main steps in the pipeline from raw data to annotation, describing the transformation of the data between steps.</p><p style='clear: both;'>Sequence length and GC histograms display the distribution before and after quality control steps.</p><p style='clear: both;'>Metadata is presented in a searchable table that contains contextual metadata describing sample location, acquisition, library construction, and sequencing using GSC compliant metadata. All metadata can be downloaded from the table.</p><p style='clear: both;'>In addition, </p><p style='clear: both;'>a breakdown of BLAT hits is provided  per data source (e.g., hits to RefSeq <a href="#citation_39" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[39]</a>, UniProt <a href="#citation_40" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[40]</a>, or <span class="glossary" data-toggle="popover" data-title="SEED" data-content="The SEED effort led by Ross Overbeek is a systematic annotation effort for prokaryotic genomes using Subsystems">SEED<sup>[?]</sup></span> <a href="#citation_17" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[17]</a>).</p><h4>Biological part of the Overview page </h4><p style='clear: both;'>The taxonomic hit distribution display divides taxonomic units into a series of pie charts of all the annotations grouped at various taxonomic ranks (domain, phylum, class, order, family, genus). The subsets are selectable for downstream analysis; this also enables downloads of subsets of reads, for example, those hitting a specific taxonomic unit.</p><h5>Rank abundance</h5><p style='clear: both;'>The rank abundance plot (Figure <a href="#fig:rank-abundance" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">rank-abundance</a>) provides a rank-ordered list of taxonomic units at a user-defined taxonomic level, ordered by their abundance in the annotations.</p><a name='fig:rank-abundance'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 3in; cursor: pointer;' onclick='window.open("Images/rank-abundance.png");' src='Images/rank-abundance.png'></div><blockquote><p><small>Sample rank abundance plot by phylum.</small></p></blockquote><h5>Rarefaction</h5><p style='clear: both;'>The rarefaction curve of annotated species richness is a plot (see Figure <a href="#fig:rarefaction" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">rarefaction</a> of the total number of distinct species annotations as a function of the number of sequences sampled.</p><p style='clear: both;'>The slope of the right-hand part of the curve is related to the fraction of sampled species that are rare.</p><p style='clear: both;'>On the left, a steep slope indicates that a large fraction of the species diversity remains to be discovered. If the curve becomes flatter to the right, a reasonable number of individuals is sampled: more intensive sampling is likely to yield only few additional species.</p><p style='clear: both;'>Sampling curves generally rise quickly at first and then level off toward an asymptote as fewer new species are found per unit of individuals collected.</p><a name='fig:rarefaction'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/rarefaction.png");' src='Images/rarefaction.png'></div><blockquote><p><small>Rarefaction plot showing a curve of annotated species richness. This curve is a plot of the total number of distinct species annotations as a function of the number of sequences sampled.</small></p></blockquote><p style='clear: both;'>The rarefaction curve is derived from the protein taxonomic annotations and is subject to problems stemming from technical artifacts. These artifacts can be similar to the ones affecting amplicon sequencing <a href="#citation_18" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[18]</a>, but the process of inferring species from protein similarities may introduce additional uncertainty.</p><h5>Alpha diversity</h5><p style='clear: both;'>In this section we display an estimate of the alpha diversity based on the taxonomic annotations for the predicted proteins. The alpha diversity is presented in context of other metagenomes in the same project (see Figure <a href="#fig:alpha-diversity" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">alpha-diversity</a>).</p><a name='fig:alpha-diversity'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/alpha-diversity.png");' src='Images/alpha-diversity.png'></div><blockquote><p><small>Alpha diversity plot showing the range of  &alpha;-diversity values in the project the data set belongs to. The min, max, and mean values are shown, with the standard deviation ranges (&sigma; and 2&sigma;) in different shades. The &alpha;-diversity of this metagenome is shown in red.</small></p></blockquote><p style='clear: both;'>The alpha diversity estimate is a single number that summarizes the distribution of species-level annotations in a dataset.   The Shannon diversity index is an abundance-weighted average of the logarithm of the relative abundances of annotated species.</p><p style='clear: both;'>We compute the species richness as the antilog of the Shannon diversity:</p><p style='clear: both;'><div class='math'> Richness = 10<sup>-<sub><span class="sigma">&Sigma;</span></sub>_i  p_i log(p_i) </sup>  </div></p><p style='clear: both;'>where p<sub>i</sub> are the proportions of annotations in each of the species categories.</p><p style='clear: both;'>Shannon species richness</p><p style='clear: both;'>has units of  the "effective number of species''. Each p is a ratio of the number of annotations for each species to the total number of annotations.</p><p style='clear: both;'>The species-level annotations are from all the annotation source databases used by MG-RAST. The table of species and number of observations used to calculate this diversity estimate can be downloaded under "download source data'' on the Overview page.</p><h5>Functional categories</h5><p style='clear: both;'>This section contains four pie charts providing a breakdown of the functional categories for KEGG <a href="#citation_11" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[11]</a>, COG <a href="#citation_27" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[27]</a>, <span class="glossary" data-toggle="popover" data-title="SEED" data-content="The SEED effort led by Ross Overbeek is a systematic annotation effort for prokaryotic genomes using Subsystems">SEED<sup>[?]</sup></span> <span class="glossary" data-toggle="popover" data-title="SEED" data-content="The SEED effort led by Ross Overbeek is a systematic annotation effort for prokaryotic genomes using Subsystems">SEED<sup>[?]</sup></span>s <a href="#citation_17" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[17]</a>, and eggNOGs <a href="#citation_10" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[10]</a>. Clicking on the individual pie chart slices will save the respective sequences to the workbench.</p><p style='clear: both;'>The relative abundance of sequences per functional category can be downloaded as a spreadsheet, and users can browse the functional breakdowns via the Krona tool <a href="#citation_30" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[30]</a> integrated in the page.</p><p style='clear: both;'>A more detailed functional analysis, allowing the user to manipulate parameters for sequence similarity matches, is available from the Analysis page.</p><a name='fig:subsystems-functions-piechart'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/subsystems-functions-piechart.png");' src='Images/subsystems-functions-piechart.png'></div><blockquote><p><small>The <span class="glossary" data-toggle="popover" data-title="Subsystem" data-content="A subsystem is a set of functional roles that an annotator has decided should be thought of as related. Frequently, subsystems represent the collection of functional roles that make up a metabolic pathway, a complex (e.g., the ribosome), or a class of proteins (e.g., two-component signal-transduction proteins within Staphylococcus aureus). Construction of a large set of curated populated subsystems is at the center of the SEED annotation efforts">Subsystem<sup>[?]</sup></span>s function piechart, showing reads classified into SEED subsystem level-one functions. In contrast to the COG, eggNOG, and KEGG classification schemes, there are over 20 top-level subsystem categories, creating a more highly resolved "fingerprint" for the metagenome.</small></p></blockquote><h3>Download page</h3><p style='clear: both;'>The Download page provides all publicly available datasets for download.</p><p style='clear: both;'>Three types of data are available for download.</p><ul><li>Metadata &hyphen;<br>data describing data in GSC-compliant format.</li><li>Submitted data &hyphen;<br>the original user submission.</li></ul><h3>Search Page</h3><a name='section:search-page'></a><p style='clear: both;'>In addition to the Browse page, one can use</p><p style='clear: both;'>the Search page to find datasets in MG-RAST.</p><p style='clear: both;'>The basic function of the Search page is to find data sets that (1) contain a search string in the metadata (dataset name, project name, project description, GSC metadata), (2) contain specific functions (e.g., SEED functional roles, SEED subsystems, or GenBank annotations), or (3) contain specific organisms. The default search uses all three kinds of data.</p><p style='clear: both;'>In addition to a Google-like search that searches all data fields, we provide specialized searches in one of the three data types. Figure</p><p style='clear: both;'><a href="#fig:search-page-unsorted-results" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">search-page-unsorted-results</a> shows the result of a metadata search for "oral health.''</p><p style='clear: both;'>Figure <a href="#fig:search-page-sorted-results" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">search-page-sorted-results</a> shows the results from Figure <a href="#fig:search-page-unsorted-results" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">search-page-unsorted-results</a> after sorting by metagenome ID.</p><a name='fig:search-page-unsorted-results'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/search-page-unsorted-results.png");' src='Images/search-page-unsorted-results.png'></div><blockquote><p><small>Searching for "oral health" returns 11 data sets for two projects. </small></p></blockquote><a name='fig:search-page-sorted-results'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/search-page-sorted-results.png");' src='Images/search-page-sorted-results.png'></div><blockquote><p><small>Search results from the previous search sorted by projects.</small></p></blockquote><h3>Analysis page</h3><a name='section:analysis-page'></a><p style='clear: both;'>The MG-RAST annotation pipeline produces a set of annotations for each sample; these annotations can be interpreted as functional or taxonomic abundance profiles. The analysis page can be used to view these profiles for a single metagenome or to compare profiles from multiple metagenomes using various visualizations (e.g., heatmap) and statistics (e.g., PCoA, normalization).</p><p style='clear: both;'>The page is divided into three parts following a typical workflow (Figure <a href="#fig:analysis-page" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">analysis-page</a>).</p><a name='fig:analysis-page'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/analysis-page.png");' src='Images/analysis-page.png'></div><blockquote><p><small>Three-step process in using the Analysis page: (1) select a profile and hit (see text) type; (2) select a list of metagenomes and set annotation source and similarity parameters; (3) choose a comparison.</small></p></blockquote><ol><li><b>Data type</b><br>Selection of an MG-RAST analysis scheme, that is, selection of a particular taxonomic or functional abundance profile mapping. For taxonomic annotations, since there is not always a unique mapping from hit to annotation, we provide three interpretations: best hit, representative hit, and lowest common ancestor (LCA), as explained in Section <a href="#section:hit-types" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">hit-types</a>.We note that when choosing the LCA annotations, not all downstream tools are available. The reason is that for the LCA annotations not all sequences will be annotated to the same level: classifications are returned on different taxonomic levels.Functional annotations can be grouped into mappings to functional hierarchies or can be displayed without a hierarchy. In addition, the recruitment plot displays the recruitment of protein sequences against a reference genome.Each selected data type has data selections and data visualizations specific for it.</li><li><b>Data selection</b><br>Selection of sample and parameters. This dialog allows the selection of multiple metagenomes that can be compared individually or selected and compared as groups. Comparison is always relative to the annotation source, e-value, and percent identity cutoffs selectable in this section. In addition to the metagenomes available in MG-RAST, sets of sequences previously saved in the workbench can be selected for visualization.</li></ol><p style='clear: both;'>The data selection dialogue provides access to data sets in four ways. The four categories can be selected from a pulldown menu.</p><ul><li><b>private</b> data &hyphen;<br>list of private or shared data sets for browsing under "available metagenomes''.</li><li><b>collections</b> &hyphen;<br>defined sets of metagenomes grouped for easier analysis. This is the recommended way of working with the analysis page.</li><li><b>projects</b> &hyphen;<br>global groups of datasets grouped by the submitting user. The project name will be displayed.</li></ul><p style='clear: both;'>When using collections or projects, data can also be grouped into one set per collection or project and subsequently compared or added.</p><a name='fig:Data-selection-expanded'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/Data-selection-expanded.png");' src='Images/Data-selection-expanded.png'></div><blockquote><p><small>View of the data selection dialogue, with the list of four data categories expanded.</small></p></blockquote><p style='clear: both;'>Once a category is selected, the data browser underneath "available metagenomes'' will display data of the selected category. The text field under "available metagenomes'' displays the available datasets or group identifiers.</p><p style='clear: both;'>The use of MG-RAST identifiers (e.g., 4447971.3) is possible in the text field underneath "available metagenomes.''</p><h4>Normalization</h4><p style='clear: both;'>Normalization refers to a transformation that attempts to reshape an underlying distribution. A large number of biological variables exhibit a log-normal distribution, meaning that when the data is transformed with a log transformation, the values exhibit a normal distribution. Log transformation of the counts data makes a normalized data product that is more likely to satisfy the assumptions  of additional downstream tests such as ANOVA or t-tests.</p><p style='clear: both;'>Standardization is a transformation applied to each distribution in a group of distributions so that all distributions exhibit the same mean and the same standard deviation. This removes some aspects of intersample variability and can make data more comparable. This sort of procedure is analogous to commonly practiced scaling procedures but is more robust in that it controls for both scale and location.</p><p style='clear: both;'>The Analysis page calculates the ordination visualizations with either raw or normalized counts, at the user's option. The normalization procedure is</p><p style='clear: both;'>as follows.</p><p style='clear: both;'>normalized_value_i = log2(raw_counts_i + 1)</p><p style='clear: both;'>The standardized values then are calculated from the normalized values by subtracting the mean of each sample's normalized values and dividing by the standard deviation of each sample's normalized values.</p><p style='clear: both;'>standardized_i = (normalized_i - mean(normalized_i)) / stddev(normalized_i)</p><p style='clear: both;'>More about these procedures is available in a number of texts. We recommend Terry Speed's "Statistical Analysis of Gene Expression in Microarray Data" <a href="#citation_32" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[32]</a>.</p><p style='clear: both;'>When data exhibit a nonnormal, normal, or unknown distribution, nonparametric tests (e.g., Man-Whitney or Kurskal-Wallis) should be used. Boxplots are easy to use, and the MG-RAST analysis page provides boxplots of the standardized abundance values for checking the comparability of samples (Figure <a href="#fig:boxplots" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">boxplots</a>).</p><a name='fig:boxplots'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 3in; cursor: pointer;' onclick='window.open("Images/boxplots.png");' src='Images/boxplots.png'></div><blockquote><p><small>Boxplots of the abundance data for raw values (top) as well as values that have undergone the normalization and standardization procedures (bottom) described in the text. After normalization and standardization, samples exhibit value distributions that are much more comparable and that have a normal distribution; the normalized and standardized data are suitable for analysis with parametric tests; the raw data are not.</small></p></blockquote><h4>Rarefaction</h4><a name='section:analysis-page-rarefaction'></a><p style='clear: both;'>The rarefaction view is available only for taxonomic data. The</p><p style='clear: both;'>rarefaction curve of annotated species richness is a plot (see Figure</p><p style='clear: both;'><a href="#fig:analysis-page-rarefaction-example" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">analysis-page-rarefaction-example</a>) of the total number</p><p style='clear: both;'>of distinct species annotations as a function of the number of</p><p style='clear: both;'>sequences sampled. As shown in Figure <a href="#fig:analysis-page-rarefaction-example" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">analysis-page-rarefaction-example</a>,</p><p style='clear: both;'>multiple data sets can be included.</p><p style='clear: both;'>The slope of the right-hand part of the curve is related to the fraction of sampled species that are rare. When the rarefaction curve is flat, more intensive sampling is likely to yield only a few additional species. The rarefaction curve is derived from the protein taxonomic annotations and is subject to problems stemming from technical artifacts. These artifacts can be similar to the ones affecting amplicon sequencing <a href="#citation_18" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[18]</a>, but the process of inferring species from protein similarities may introduce additional uncertainty.</p><p style='clear: both;'>On the Analysis page the rarefaction plot serves as a means of comparing species richness between samples in a way independent of the sampling depth.</p><a name='fig:analysis-page-rarefaction-example'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/analysis-page-rarefaction-example.png");' src='Images/analysis-page-rarefaction-example.png'></div><blockquote><p><small>Rarefaction plot showing a curve of annotated species richness. This curve is a plot of the total number of distinct species annotations as a function of the number of sequences sampled.</small></p></blockquote><p style='clear: both;'>On the left, a steep slope indicates that a large fraction of the species diversity remains to be discovered. If the curve becomes flatter to the right, a reasonable number of individuals is sampled: more intensive sampling is likely to yield only a few additional species.</p><p style='clear: both;'>Sampling curves generally rise very quickly at first and then level off toward an asymptote as fewer new species are found per unit of individuals collected. These rarefaction curves are calculated from the table of species abundance. The curves represent the average number of different species annotations for subsamples of the the complete dataset.</p><h4>KEGG mapper</h4><a name='section:kegg-mapper'></a><p style='clear: both;'>The KEGG map tool allows the visual comparison of predicted metabolic pathways in metagenomic samples.</p><p style='clear: both;'>It maps the abundance of identified enzymes onto a KEGG <a href="#citation_11" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[11]</a> map of functional pathways; note that the mapper is available only for functional data).</p><p style='clear: both;'>Users can select from any available KEGG pathway map.</p><p style='clear: both;'>Different colors indicate different metagenomic datasets.</p><p style='clear: both;'>The KEGG mapper works by providing two buffers that users can assign datasets to.</p><p style='clear: both;'>After loading the buffers with the intended datasets, the KEGG mapper can highlight parts of the KEGG map that are present in the dataset.</p><p style='clear: both;'>Several combinations of the two datasets can be displayed, as shown in Figure <a href="#fig:analysis-page-kegg-mapper-options" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">analysis-page-kegg-mapper-options</a>.</p><p style='clear: both;'>Metagenomes can be assigned into one of two groups, and those groups can be visually compared</p><p style='clear: both;'>(see Figure <a href="#fig:analysis-page-kegg-mapper-example" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">analysis-page-kegg-mapper-example</a>).</p><a name='fig:analysis-page-kegg-mapper-options'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 2in; cursor: pointer;' onclick='window.open("Images/analysis-page-kegg-mapper-options.png");' src='Images/analysis-page-kegg-mapper-options.png'></div><blockquote><p><small>Options available for coloring the KEGG maps.</small></p></blockquote><a name='fig:analysis-page-kegg-mapper-example'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/analysis-page-kegg-mapper-example.png");' src='Images/analysis-page-kegg-mapper-example.png'></div><blockquote><p><small>Comparison of two datasets using the KEGG mapper. Parts of metabolism common are shown in purple; unique to A are in blue; unique to B are in red.</small></p></blockquote><h4>Recruitment plots</h4><a name='section:recruitment-plots'></a><p style='clear: both;'>The recruitment page allows mapping of protein sequences in a single metagenome onto the complete genome sequences that are represented in the M5nr.</p><p style='clear: both;'>Once the metagenome is selected, the page will provide a list of genomes, sorted by the number of hits per genome, from which the user can choose a genome to display (see Figure <a href="#fig:analysis-page-recruitment-plot-genome-selection" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">analysis-page-recruitment-plot-genome-selection</a>).</p><a name='fig:analysis-page-recruitment-plot-genome-selection'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/analysis-page-recruitment-plot-genome-selection.png");' src='Images/analysis-page-recruitment-plot-genome-selection.png'></div><blockquote><p><small>Selection of a genome for display, sorted by number of hits per genome.</small></p></blockquote><p style='clear: both;'>A circular genome plot or a table will be printed. See Figure <a href="#fig:analysis-page-recruitment-plot-example" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">analysis-page-recruitment-plot-example</a></p><p style='clear: both;'>for an example. The following elements are contained in the figure:</p><ul><li>outmost circle: forward strand genes (red: protein, black: RNA)</li><li>2nd circle: contigs for the reference genome</li><li>3rd circle: reverse strand genes (red: protein, black: RNA)</li></ul><a name='fig:analysis-page-recruitment-plot-example'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/analysis-page-recruitment-plot-example.png");' src='Images/analysis-page-recruitment-plot-example.png'></div><blockquote><p><small>Example recruitment plot with the parameters from the previous figure for <i>Actinomyces viscosus</i> C505.</small></p></blockquote><p style='clear: both;'>The table view has the same information as the circular view and can easily be downloaded into a local spreadsheet. We use RefSeq<a href="#citation_39" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[39]</a> identifiers for the table as well as RefSeq functions because the underlying contig information is present in the GenBank<a href="#citation_3" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[3]</a> downloads.</p><p style='clear: both;'>The recruitment plot uses the best hit approach.</p><h4>Bar charts</h4><a name='section:bar-charts'></a><a name='fig:analysis-page-bar-chart'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/analysis-page-bar-chart.png");' src='Images/analysis-page-bar-chart.png'></div><blockquote><p><small>Bar chart view comparing normalized abundance of taxa. We have expanded the Bacteria domain to display the next level of the hierarchy.</small></p></blockquote><p style='clear: both;'>Figure <a href="#fig:analysis-page-bar-chart" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">analysis-page-bar-chart</a> shows the bar chart visualization option on the Analysis page. One important property of the page is the built-in ability to drill down by clicking on a specific category. In this example we have expanded the domain Bacteria to show the normalized abundance (adjusted for sample sizes) of bacterial phyla. The abundance information displayed can be downloaded into a local spreadsheet. Once a subselection has been made (e.g., the domain Bacteria selected), data can be sent to the workbench for detailed analysis.</p><p style='clear: both;'>In addition, reads from a specific level can be added into the workbench.</p><h4>Tree diagram</h4><p style='clear: both;'>Figure <a href="#fig:analysis-page-radial-tree" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">analysis-page-radial-tree</a></p><p style='clear: both;'>shows the tree diagram option on the Analysis page.</p><a name='fig:analysis-page-radial-tree'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/analysis-page-radial-tree.png");' src='Images/analysis-page-radial-tree.png'></div><blockquote><p><small>Tree diagram visualization option on the Analysis page.</small></p></blockquote><p style='clear: both;'>The tree diagram allows comparison of datasets against a hierarchy (e.g., <span class="glossary" data-toggle="popover" data-title="Subsystem" data-content="A subsystem is a set of functional roles that an annotator has decided should be thought of as related. Frequently, subsystems represent the collection of functional roles that make up a metabolic pathway, a complex (e.g., the ribosome), or a class of proteins (e.g., two-component signal-transduction proteins within Staphylococcus aureus). Construction of a large set of curated populated subsystems is at the center of the SEED annotation efforts">Subsystem<sup>[?]</sup></span>s or the NCBI taxonomy).</p><p style='clear: both;'>The hierarchy is displayed as a rooted tree, and the abundance (normalized for dataset size or raw) for each dataset in the various categories is displayed as a bar chart for each category.</p><p style='clear: both;'>By clicking on a category (inside the circle), detailed information can be requested for that node; see Figure <a href="#fig:analysis-page-tree-additional-bar-charts" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">analysis-page-tree-additional-bar-charts</a>.</p><a name='fig:analysis-page-tree-additional-bar-charts'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 4in; cursor: pointer;' onclick='window.open("Images/analysis-page-tree-additional-bar-charts.png");' src='Images/analysis-page-tree-additional-bar-charts.png'></div><blockquote><p><small>Tree diagram provision for detailed information: clicking on a node in the tree diagram will display addition information to the right of the tree display.</small></p></blockquote><p style='clear: both;'>The tree offers several other capabilities, as shown in Figure <a href="#fig:analysis-page-tree-options" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">analysis-page-tree-options</a>.</p><a name='fig:analysis-page-tree-options'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 4in; cursor: pointer;' onclick='window.open("Images/analysis-page-tree-options.png");' src='Images/analysis-page-tree-options.png'></div><blockquote><p><small>Options for the tree view.</small></p></blockquote><ul><li>Export of a high-resolution image &hyphen;<br>For publication purposes we provide an SVG version of the image.</li><li>Rerooting &hyphen;<br>The tree display allows zooming in by rerooting the tree display. The user selects a node inside the tree (turning it red), and then selects "reroot'' at the selected node. See Figure <a href="#fig:analysis-page-tree-options" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">analysis-page-tree-options</a>.</li><li>Bar chart or stacked chart &hyphen;<br>The hierarchy entries can be displayed as bar charts per node or as a stacked graph.</li><li>Restrict to domain &hyphen;<br>Is identical to rerooting the tree for a specific domain.</li><li>Maximum level &hyphen;<br>This setting determines the depth of the tree being displayed.</li></ul><p style='clear: both;'>Figure <a href="#fig:analysis-page-tree-order-level-with-phylum-colors" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">analysis-page-tree-order-level-with-phylum-colors</a> shows the result of changing the display depth and coloring options. The color is used to group organisms visually into order level groups.</p><a name='fig:analysis-page-tree-order-level-with-phylum-colors'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/analysis-page-tree-order-level-with-phylum-colors.png");' src='Images/analysis-page-tree-order-level-with-phylum-colors.png'></div><blockquote><p><small>Tree view at order level with coloring set to phylum level.</small></p></blockquote><h4>Heatmap/Dendrogram</h4><a name='fig:heatmap'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 4in; cursor: pointer;' onclick='window.open("Images/heatmap.png");' src='Images/heatmap.png'></div><blockquote><p><small>Heatmap/dendogram example in MG-RAST. The MG-RAST heatmap/dendrogram has two dendrograms, one indicating the similarity/dissimilarity among metagenomic samples (x axis dendrogram) and another indicating the similarity/dissimilarity among annotation categories (e.g., functional roles; the y-axis dendrogram).</small></p></blockquote><p style='clear: both;'>The heatmap/dendrogram (Figure <a href="#fig:heatmap" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">heatmap</a>) allows an enormous amount of information to be presented in a visual form that is amenable to human interpretation. Dendrograms are trees that indicate similarities between annotation vectors. The MG-RAST heatmap/dendrogram has two dendrograms, one indicating the similarity/dissimilarity among metagenomic samples (x-axis dendrogram) and another indicating the similarity/dissimilarity among annotation categories (e.g., functional roles; the y-axis dendrogram). A distance metric is evaluated between every possible pair of sample abundance profiles. A clustering algorithm (e.g., ward-based clustering) then produces the dendrogram trees. Each square in the heatmap dendrogram represents the abundance level of a single category in a single sample. The values used to generate the heatmap/dendrogram figure can be downloaded as a table by clicking on the download button.</p><h4>Ordination</h4><p style='clear: both;'>MG-RAST uses Principle Coordinate Analysis (PCoA) to reduce the dimensionality of comparisons of multiple samples that consider functional or taxonomic annotations.</p><p style='clear: both;'>Dimensionality reduction is a process that allows the complex variation found in a large datasets (e.g., the abundance values of thousands of functional roles or annotated species across dozens of metagenomic samples) to be reduced to a much smaller number of variables that can be visualized as simple two- or three-dimensional scatter plots. The plots enable interpretation of the multidimensional data in a human-friendly presentation. Samples that exhibit similar abundance profiles (taxonomic or functional) group together, whereas those that differ are found farther apart.</p><p style='clear: both;'>A key feature of PCoA-based analyses is that users can compare components not just to each other but to metadata recorded variables (e.g., sample pH, biome, DNA extraction protocol) to reveal correlations between extracted variation and metadata-defined characteristics of the samples. It is also possible to couple PCoA with higher-resolution statistical methods in order to identify individual sample features (taxa or functions) that drive correlations observed in PCoA visualizations. This coupling can be accomplished with permutation-based statistics applied directly to the data before calculation of distance measures used to produce PCoAs; alternatively, one can apply conventional statistical approaches (e.g., ANOVA or Kruskal-Wallis test) to groups observed in PCoA-based visualizations.</p><h4>Table</h4><p style='clear: both;'>The table tool creates a spreadsheet-based abundance table that can be searched and restricted by the user. Tables can be generated at user-selected levels of phylogenetic or functional resolution. Table data can be visualized by using Krona <a href="#citation_30" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[30]</a> or  can be exported in BIOM<a href="#citation_15" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[15]</a> format to be used in other tools (e.g., QIIME <a href="#citation_4" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[4]</a>).  The tables also can be exported as tab-separated text.</p><p style='clear: both;'>Abundance tables serve as the basis for all comparative analysis tools in MG-RAST, from PCoA to heatmap/dendrograms.</p><p style='clear: both;'>Consider the following example showing how to use</p><p style='clear: both;'>the taxonomic information derived from an analysis of protein similarities found for the data set 4447970.3.</p><p style='clear: both;'>We use the best hit classification, <span class="glossary" data-toggle="popover" data-title="SEED" data-content="The SEED effort led by Ross Overbeek is a systematic annotation effort for prokaryotic genomes using Subsystems">SEED<sup>[?]</sup></span>, 10<sup>-5</sup>, 60% identity, and a minimal alignment length of 15 amino acids. We select table output. The results are shown in Figure <a href="#fig:analysis-page-table" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">analysis-page-table</a>.</p><p style='clear: both;'>The following control elements are connected to the table:</p><ul><li>group by &hyphen;<br>allows summarizing entries below the level chosen here to be subsumed.</li><li>download table &hyphen;<br>downloads the entire table as a spreadsheet.</li><li>Krona &hyphen;<br>invokes KRONA <a href="#citation_30" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[30]</a> with the table data.</li><li>QIIME &hyphen;<br>creates a BIOM<a href="#citation_15" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[15]</a> format file with the data being displayed in the table.</li></ul><a name='fig:analysis-page-table'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/analysis-page-table.png");' src='Images/analysis-page-table.png'></div><blockquote><p><small>View of the analysis page table.</small></p></blockquote><p style='clear: both;'>Below we explain the columns of the table and the functions available for them.</p><p style='clear: both;'>For each column we allow sorting the table by clicking on the upward- and downward-pointing triangles.</p><ul><li>metagenome<br>In the case of multiple datasets being displayed, this column allows sorting by metagenome ID or selection of a single metagenome.</li><li>source<br>This displays the annotation source for the data being displayed.</li><li>domain<br>The domain column allows subselecting from Archaea, Bacteria, Eukarya, and Viruses.</li><li>phylum, class<br>Since we have selected to group results at the class level, only phylum and class are being displayed. The text fields in the column headersallow subsection (e.g., by entering Acidobacteria or Actinobacteria in the phylum field). The searches are performed inside the web browser and are efficient.Any subselection will narrow down all datasets being displayed in the table.Users can elect to have the results grouped by other taxonomy levels (e.g., genus), creating more columns in the table view.</li><li>abundance<br>This indicates the number of sequences found with the parameters selected matching this taxonomic unit. (Note that the parameters chosen are displayed on top of the table.) Clicking on the abundance displays another page displaying the BLAT alignments underlying the assignments.The abundance is calculated by multiplying the actual number of database hits found for the clusters by the number of cluster members.</li><li>avg. evalue, avg percent identity, average alignment length<br>These indicate the average values for E  value, percent identity, and alignment length.</li><li>hits<br>This is the  number of clusters found for this entity (function or taxon) in the metagenome.</li></ul><h4>Workbench</h4><p style='clear: both;'>The workbench was designed to allow users to select subsets of the data for comparison or export.</p><p style='clear: both;'>Specifically, the workbench supports selecting sequence features and submitting them to further analysis or other analysis. A number of use cases are described below.</p><p style='clear: both;'>An important limitation with the current implementation is that data sent to the workbench exists only until the current session is closed.</p></section><section id='navitem_3'><h2>User Manual</h2><h3>URL</h3><p style='clear: both;'><a href="http://metagenomics.anl.gov/" target=_blank>http://metagenomics.anl.gov/</a></p><h3>Account</h3><p style='clear: both;'>The analyses of all public datasets in MG-RAST can be viewed in entirety without an MG-RAST account. An account is required to submit sequence data</p><p style='clear: both;'>for analysis or view the analyses of datasets which have been shared with you.</p><h4>Account registration</h4><p style='clear: both;'>Use the "Register'' link on the front page of the website to request an account with MG-RAST, you will need to enter a unique login name and email address</p><p style='clear: both;'>along with other minimal information. Use an email address you use regularly as it will be used to communicate with you when necessary. After registering</p><p style='clear: both;'>you will receive an automated email with a temporary password after your account has been authorized, usually within a day.</p><p style='clear: both;'>If you forget your password you can request a new password on the MG-RAST website using your login and registered email address, a new password will</p><p style='clear: both;'>be generated and sent by email to this address.</p><h4>Account webkey</h4><a name='section:webkey'></a><p style='clear: both;'>The webkey is a unique string of text, e.g. "b8Dvg2d5DCp7KsWKBPzY2GS4i'' associated with your account which is used by MG-RAST for identification</p><p style='clear: both;'>purposes. Your webkey is valid for a limited time period after which it expires and will not work anymore. You can generate a new webkey at any time, even if your current webkey has not expired.</p><p style='clear: both;'>The MG-RAST website provides two locations where you can generate a new webkey:</p><ol><li>Log in to MG-RAST and go to the Account Management page. Press the button under ÒPreferencesÓ to go the the Manage Preferences page where the Web Services section displays your current webkey with its termination date. Click on the "generate new key'' button to generate a new key and then click the "set preferences'' button.</li></ol><p style='clear: both;'>Note that generating a new webkey will invalidate your old webkey and your new webkey will be valid until the termination date displayed on the page.</p><h3>Uploading to MG-RAST</h3><p style='clear: both;'>MG-RAST was designed to allow users to upload sequence data directly from next-generation sequencing machines. Data can be in FASTA, FASTQ, or SFF format.</p><p style='clear: both;'>We suggest uploading raw data (in FASTQ or SFF format) and letting MG-RAST perform the quality control step because</p><p style='clear: both;'>this approach will allow us to identify any issues with the sequencing run. Frequently, local quality control will identify some</p><p style='clear: both;'>issues but mask others.</p><p style='clear: both;'>Compressing large files will reduce the upload time and the chances of a failed upload. Users can upload gzip (.gz) and bzip2 (.bz2) or Zip (.zip) files, as well as tar archives compressed with gzip (.tar.gz) or bzip2 (.tar.bz2). Note that the size of Zip files should be under 4 GB in size.</p><p style='clear: both;'>It is not necessary to assemble data prior to upload to MG-RAST. The system has been optimized for short reads and can handle uploads of many hundreds of gigabytes.</p><p style='clear: both;'>Assembled data can be uploaded to MG-RAST and read abundance information for contigs can be imported as well from FASTA files.</p><p style='clear: both;'>The "assembled'' option for the pipeline will attempt to retrieve read abundance information from the FASTA sequence files.</p><h4>Steps for submission via the web interface</h4><p style='clear: both;'>To start uploading data to MG-RAST through the website, click on the green up arrow. Doing so opens the Upload page.</p><p style='clear: both;'>On this page you can upload files, modify the files where needed, add metadata, and submit files for analysis.</p><p style='clear: both;'>The page is split into two sections: "Prepare Data,'' to upload, manipulate, and assemble all the files required for a submission, and "Submission,'' to create the MG-RAST job(s), set analysis parameters, and start the analysis. Each section contains subsections that you can click to expand.</p><h5>Prepare data</h5><p style='clear: both;'>All files uploaded to MG-RAST should be named using only alphanumeric and .-_ characters without spaces. </p><p style='clear: both;'>Files larger than 50 MB should be compressed before upload, using gzip (preferable), bzip2 or Zip (less than 4 GB in size). Compression will reduce the time taken for the upload of the file, which in turn reduces the chance that the upload will fail.</p><p style='clear: both;'>The requirements for submission are sequence information (required), metadata (strongly recommended) and barcode information (for multiplexed datasets only).</p><ul><li><b>Sequence files</b><br>Sequence files must be in either FASTA, FASTQ, or SFF formatsSequence file names must have one of the following extensions &hyphen; `.fasta', `.fna', `.fastq', `.fq', or `.sff'.FASTA and FASTQ files should be in plain text ASCII.FASTA files (and all sequence data submitted to MG-RAST) should not contain protein sequences.Assembled data with read abundance information must be in FASTA format and the coverage included in the sequence ID using the following simple format:<pre>>sequence_number_1_[cov=2]CTAGCGCACATAGCATTCAGCGTAGCAGTCACTAGTACGTAGTACGTACC>sequence_number_2_[cov=4]ACGTAGCTCACTCCAGTAGCAGGTACGTCGAGAAGACGTCTAGTCATCAT....</pre>The abundance information must be appended without spaces to the end of the sequence name (also without whitespace) in the format "_[cov=n]'', where n is the coverage or abundance of each contig.Sequence files in this format should be submitted with the "assembled'' option selected and the pipeline will retrieve read abundance information from the sequence file.</li><li><b>Metadata file</b><br>We provide a spreadsheet template that can be filled out with all the available metadata information for a dataset, there is a link to the template on the upload page. Download the template and edit to include as much information as is available. While the number of fields in the template is large, the number of required fields, colored in red in the template, is small. The template file can be used to upload metadata for one or multiple samples and submit them to MG-RAST as a single project. The metadata can be modified at any time after submission to add information or to correct errors. See Section <a href="#section:generating_metadata" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">generating_metadata</a> for more details.</li></ul><h5>Upload files</h5><p style='clear: both;'>On the Upload page, in the "upload files'' tab, click on the "Browse'' button to select the file or files.  The upload will begin automatically after the files are selected. Once the upload has started progress bars will be displayed. If the upload does not start immediately check that you are using the latest version of FireFox.</p><p style='clear: both;'>For the actual uploading we use an HTML5 feature <a href="#citation_37" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[37]</a> that automatically breaks the files into chunks on the client side and sends them. Note: This is one of the reasons we request that you use a recent version of Firefox as older versions might be slower.</p><p style='clear: both;'>Based on observed values, upload times per 1 GB (10<sup>9</sup> bytes) vary from 2 minutes to over an hour, with typical times being 10 to 15 minutes. Your experience will vary depending on the speed of your connection to the internet and the quality of service in your region.</p><p style='clear: both;'>Table 1 summarizes observed upload times that might help users estimate how long the upload should take.</p><div style='text-align: center;'><table class='table table-bordered'><h5>Summary of upload times</h5><tr><th style='text-align: center'>Technology </th><th style='text-align: center'> Rate (bit/s) </th><th style='text-align: center'> Time for 1GB Upload</th></tr><tr><td style='text-align: center'>Modem 14.4 (2400 baud) </td><td style='text-align: center'>	14.4 kbit/s</td><td style='text-align: center'>	154 hours</td></tr><tr><td style='text-align: center'>ADSL Lite </td><td style='text-align: center'> 1.5 Mbit/s </td><td style='text-align: center'>	1.5 hours</td></tr><tr><td style='text-align: center'>Ethernet</td><td style='text-align: center'>	10 Mbit/s </td><td style='text-align: center'> 13.33 minutes</td></tr><tr><td style='text-align: center'>T3 </td><td style='text-align: center'>	44.736 Mbit/s </td><td style='text-align: center'>~3 minutes</td></tr><tr><td style='text-align: center'>Fast Ethernet </td><td style='text-align: center'>	100 Mbit/s </td><td style='text-align: center'>1.33 minutes</td></tr></table></div><p style='clear: both;'><b>Verifying the integrity of the uploaded files.</b></p><p style='clear: both;'>When the upload of your files has completed, you will be prompted with the <span class="glossary" data-toggle="popover" data-title="MD5" data-content="The MD5 message-digest algorithm is a widely used cryptographic hash function that produces a 128-bit (16-byte) hash value. Specified in RFC 1321, MD5 has been utilized in a wide variety of security applications, and is also commonly used to check data integrity">MD5<sup>[?]</sup></span>-sum of each file. You should generate an MD5 sum for each uploaded file on your machine, paste it into the appropriate box in the prompt, and click the "check" button (see Figure 4.1). A popup will show you whether there is a match; additionally the check button will turn green upon success and red upon failure. Click the "Close" button if you have completed the checks or if you wish to skip this step.</p><a name='fig:upload-page-md5-verification'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 4in; cursor: pointer;' onclick='window.open("Images/upload-page-md5-verification.png");' src='Images/upload-page-md5-verification.png'></div><blockquote><p><small>Dialogue requesting the user to put in a locally generated <span class="glossary" data-toggle="popover" data-title="MD5" data-content="The MD5 message-digest algorithm is a widely used cryptographic hash function that produces a 128-bit (16-byte) hash value. Specified in RFC 1321, MD5 has been utilized in a wide variety of security applications, and is also commonly used to check data integrity">MD5<sup>[?]</sup></span> checksum for the files to identify any data corruption during the upload.</small></p></blockquote><p style='clear: both;'>Checking the integrity especially of large files is important because it will give you immediate feedback about whether your upload was successful. If not detected at upload time, a damaged file will lead to errors later in the pipeline, wasting both valuable compute cycles and, even more important, your time. To generate an <span class="glossary" data-toggle="popover" data-title="MD5" data-content="The MD5 message-digest algorithm is a widely used cryptographic hash function that produces a 128-bit (16-byte) hash value. Specified in RFC 1321, MD5 has been utilized in a wide variety of security applications, and is also commonly used to check data integrity">MD5<sup>[?]</sup></span> sum of your file, you can use the "md5" shell command on a Mac, the "md5sum" shell command on Unix systems, or the freely available md5-sum tools on Windows (e.g., from http://www.winmd5.com/).</p><p style='clear: both;'><b>File filters in place for uploaded files.</b></p><p style='clear: both;'>Since MG-RAST has been designed to work with metagenomic and metatranscriptomic datasets, there is a filter in place trying to identify</p><p style='clear: both;'>datasets not suitable for MG-RAST. Those datasets will be colored red in the inbox listing and cannot be submitted.</p><p style='clear: both;'>Following are the criteria for rejection:</p><ul><li>Protein sequences &hyphen;<br>MG-RAST is optimized to perform translation from DNA to proteins.</li><li>Reads shorter than 75 basepairs &hyphen;<br>The gene prediction stage performance deteriorates significantly with shorter reads.</li><li>genomes &hyphen;<br>Submissions with complete genomes or a small number of contigs are rejected as well. Here our sister service RAST at <a href="http://rast.nmpdr.org" target=_blank>http://rast.nmpdr.org</a> should be used instead of MG-RAST.</li><li>Files that are too small (sequence data less than 1 Mbp) &hyphen;<br>Files that are too small for MG-RAST to properly function are rejected at the submission stage. The minimal size requirement is 1 megabasepair.</li><li>Corrupted files &hyphen;<br>FASTA and FASTQ files which do not conform to the format standard, e.g. if the number of unique identifiers does not match the number of sequence records in a file, the file is considered corrupt.</li><li>Alignments &hyphen;<br>We cannot identify proteins from sequences containing alignment information.</li><li>Colorspace &hyphen;<br>The tool chain does not function for ABIsolid sequences in colorspace. Please translate to standard FASTA.</li></ul><p style='clear: both;'>In addition we will filter at the upload stage any Word documents, Rich Text Format files, and all</p><p style='clear: both;'>files without the extension .fna, .fasta, .fq, .fastq, or .sff in their name.</p><p style='clear: both;'><b>Note:</b> We recommend computing an <span class="glossary" data-toggle="popover" data-title="MD5" data-content="The MD5 message-digest algorithm is a widely used cryptographic hash function that produces a 128-bit (16-byte) hash value. Specified in RFC 1321, MD5 has been utilized in a wide variety of security applications, and is also commonly used to check data integrity">MD5<sup>[?]</sup></span> checksum and verifying that the checksum computed by MG-RAST is identical to the locally computed checksum. This is the best way to ensure data integrity.</p><p style='clear: both;'>All files uploaded to MG-RAST will be displayed in your inbox and you can perform certain operations on them. Compressed and/or archived files must be unpacked, SFF files must be converted to FASTQ, and sequence data can be demultiplexed using barcodes contained in an uploaded barcode file. Files can also be deleted. See Section <a href="#section:managing_the_inbox" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">managing_the_inbox</a> for more details.</p><p style='clear: both;'>When a sequence file is selected, some information about the sequence data is displayed, see Figure <a href="#fig:Inbox-File-Information" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">Inbox-File-Information</a>. It is a good idea to check that the uploaded files in your inbox match your local copies. The file <span class="glossary" data-toggle="popover" data-title="MD5" data-content="The MD5 message-digest algorithm is a widely used cryptographic hash function that produces a 128-bit (16-byte) hash value. Specified in RFC 1321, MD5 has been utilized in a wide variety of security applications, and is also commonly used to check data integrity">MD5<sup>[?]</sup></span> checksum, file size, sequence count, and basepair count can be used for this purpose.</p><p style='clear: both;'><b>Please note:</b> After the actual upload is complete, the system will compute the statistics shown in Figure <a href="#fig:Inbox-File-Information" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">Inbox-File-Information</a>. Computing this information takes some time, so the statistics for your sequence files will not be visible immediately after you uploaded it. If the statistics are not displayed in a reasonable time refresh your browser page to trigger the statistics computation.</p><h5>Submission</h5><p style='clear: both;'>The submission process allows you to create MG-RAST jobs using files in your inbox. It is designed to facilitate the creation of a large number of jobs easily.</p><ul><li><b>Select metadata file</b><br>We recommend you supply metadata for all your samples. We assign a higher processing priority to samples with metadata. Metadata files that have successfully passed our validation step will be displayed for selection.</li><li><b>Select project</b><br>All jobs created in MG-RAST will need to be placed in a project&hyphen;-either an existing project or a new one created by you during the submission. The project can be specified in one of three ways: in the metadata file if supplied or selected from the existing projects you have access to, or a new project name can be entered into the text box.</li><li><b>Select sequence file(s)</b><br>All FASTA and FASTQ sequence files in your inbox will be displayed for selection and job submission. Each sequence file can be used to create a single MG-RAST job. SFF files must be converted to FASTQ and the FASTQ file will be used for the submission.</li><li><b>Choose pipeline options</b><br>The MG-RAST analysis can be influenced by the options selected here, which affect dereplication, screening, and quality of the filtering of the reads. The options selected are applied to all the sequence files selected.</li></ul><p style='clear: both;'>You can monitor the progress of your jobs in "My Data Summary" on the Browse Metagenomes page.</p><h4>Cmd-line uploader</h4><p style='clear: both;'>The following syntax will allow uploading to MG-RAST from the command line.</p><pre>curl -H "auth: webkey" -X POST -F "upload=@/path_to_file/
metagenome.fasta" "http://api.metagenomics.anl.gov/
inbox/upload" > curl_output.txt
</pre><p style='clear: both;'>where you need to substitute "webkey'' (see Section <a href="#section:webkey" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">webkey</a>) with the unique string of text generated by MG-RAST for your account. Your webkey is valid for a limited time period and ensures that the uploads you perform from the command line are recognized as belonging to your MG-RAST account and are placed in the correct inbox.</p><h4>Managing the Inbox</h4><a name='section:managing_the_inbox'></a><p style='clear: both;'>The Inbox is a temporary storage location for sequence and metadata files prior to submission to the pipeline, see Figure <a href="#fig:Inbox" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">Inbox</a>. To protect us from any</p><p style='clear: both;'>misuse of the facility, we have limited the Inbox to metadata spreadsheets and sequence files.</p><p style='clear: both;'>Files are visible only to the uploading user and will automatically be deleted after 72 hours.</p><a name='fig:Inbox'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/Inbox.png");' src='Images/Inbox.png'></div><blockquote><p><small>Temporary storage provided in Inbox before submitting data and limited editing features.</small></p></blockquote><h5>File-processing options in the Inbox</h5><p style='clear: both;'>The following file-processing options are available. </p><ul><li>unpack selected &hyphen;<br>unpacks selected zip, gzip, bzip2 files and tar archives compressed with gzip or bzip2.</li><li>convert SFF to FASTQ &hyphen;<br>converts selected SFF files to FASTQ format (only FASTQ and FASTA files can be submitted to the system).</li><li>demultiplex &hyphen;<br>demultiplexes selected files.Note that this is suitable only for 454 type barcodes that are actual prefixes of the reads. This approach does not work for the Illumina barcode approach (basically a third read for each paired end read).</li></ul><p style='clear: both;'><b>Demultiplexing for 454 and similar datasets</b>:</p><p style='clear: both;'>MG-RAST performs demultiplexing based on the presence of the barcode sequence at the beginning of the reads.</p><p style='clear: both;'>Assume you have a sequence file testseq.fasta and your barcode file has tab-separated lines like the following.</p><pre>AAAAAAAA     fileA
CCCCCCCC     fileC
</pre><p style='clear: both;'>The demultiplexing step will split your sequence file into three files:</p><p style='clear: both;'>fileA.fasta containing all the reads that begin with AAAAAAAA,</p><p style='clear: both;'>fileC.fasta containing all the reads that begin with CCCCCCCC,</p><p style='clear: both;'>and</p><p style='clear: both;'>testseq_no_MID_tag.fasta containing reads that do not match either of the two.</p><p style='clear: both;'>We note that demultiplexing for Illumina needs to be done outside the MG-RAST system. Illumina barcodes work differently from 454 barcodes.</p><h5>Directory management operations for the Inbox</h5><p style='clear: both;'>The following operations are available for managing the directory.</p><ul><li>update inbox &hyphen;<br>refreshes the contents of your inbox</li><li>move selected &hyphen;<br>moves the selected files into or out of a directory</li><li>delete selected &hyphen;<br>deletes the selected files</li><li>create directory &hyphen;<br>creates a new directory in your inbox</li></ul><p style='clear: both;'>Users should always double check the <span class="glossary" data-toggle="popover" data-title="MD5" data-content="The MD5 message-digest algorithm is a widely used cryptographic hash function that produces a 128-bit (16-byte) hash value. Specified in RFC 1321, MD5 has been utilized in a wide variety of security applications, and is also commonly used to check data integrity">MD5<sup>[?]</sup></span> checksum for files that are uploaded to the system in order to verify the integrity. Figure <a href="#fig:Inbox-File-Information" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">Inbox-File-Information</a> shows the MD5 fingerprint that is computed upon upload for each file.</p><a name='fig:Inbox-File-Information'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 4in; cursor: pointer;' onclick='window.open("Images/Inbox-File-Information.png");' src='Images/Inbox-File-Information.png'></div><blockquote><p><small>Information displayed by the inbox for one file (once selected).</small></p></blockquote><h4>Generating metadata for the submission</h4><a name='section:generating_metadata'></a><p style='clear: both;'>MG-RAST uses questionnaires to capture metadata for each project with one or more samples. Users download and fill out the questionnaire and then submit it.</p><p style='clear: both;'>Questionnaires are validated</p><p style='clear: both;'>automatically by MG-RAST</p><p style='clear: both;'>for completeness and compliance with the controlled vocabularies for certain fields.</p><p style='clear: both;'>MG-RAST has implemented the use of Minimum Information about any (X) Sequence (MIxS)<a href="#citation_22" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[22]</a> developed by the Genomic Standards Consortium. In addition to the minimal checklists, more detailed data can be captured in optional environmental packages.</p><p style='clear: both;'>We use simple spreadsheets to capture metadata, with a minimal number of required fields (in red in the spreadsheets) and a number of optional fields. The spreadsheet is separated into multiple tabs representing the different metadata categories. The MG-RAST metadata spreadsheet template is available on the MG-RAST upload page or at <a href="ftp://ftp.metagenomics.anl.gov/data/misc/metadata/MGRAST_MetaData_template_1.3.xlsx" target=_blank>ftp://ftp.metagenomics.anl.gov/data/misc/metadata/MGRAST_MetaData_template_1.3.xlsx</a>.</p><p style='clear: both;'>A filled-out version of the spreadsheet is available at <a href="ftp://ftp.metagenomics.anl.gov/data/misc/metadata/MGRAST_MetaData_template_example.xlsx" target=_blank>ftp://ftp.metagenomics.anl.gov/data/misc/metadata/MGRAST_MetaData_template_example.xlsx</a>.</p><p style='clear: both;'>In Figure <a href="#fig:project-spreadsheet" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">project-spreadsheet</a> we show the template tab for project and the required field labels (in red) (in essence, your contact information).</p><p style='clear: both;'>Figure <a href="#fig:project-spreadsheet-multiple-tabs" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">project-spreadsheet-multiple-tabs</a> shows the various tabs in the spreadsheet.</p><a name='fig:project-spreadsheet'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/project-spreadsheet.png");' src='Images/project-spreadsheet.png'></div><blockquote><p><small>Project spreadsheet. In red are required fields. Note that the 2nd row contains information on how to fill out the form.</small></p></blockquote><a name='fig:project-spreadsheet-multiple-tabs'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/project-spreadsheet-multiple-tabs.png");' src='Images/project-spreadsheet-multiple-tabs.png'></div><blockquote><p><small>The various tabs in the spreadsheet. Project, sample and one of library metagenome or library mimarks survey are required.</small></p></blockquote><p style='clear: both;'>Note: Use the third line in the spreadsheet and as shown in Figure <a href="#fig:project-spreadsheet-with-3-samples" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">project-spreadsheet-with-3-samples</a> to enter your data. Do not attempt to alter the first two lines or delete them; they are read only. The first line contains the field labels, and the second line contains descriptions that can help explain how to fill out the fields, along with what unit to use (e.g., temperature in Celsius and distance in meters), URL for the bioportal ontology site etc..</p><a name='fig:project-spreadsheet-with-3-samples'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/project-spreadsheet-with-3-samples.png");' src='Images/project-spreadsheet-with-3-samples.png'></div><blockquote><p><small>Sample tab with 3 new samples (sample1, sample2, and sample3) added. Again red text in the first row indicates required fields. Rows 1 and 2 cannot be altered.</small></p></blockquote><h5>Required sheets</h5><p style='clear: both;'>You need to fill out four sheets to describe your metadata:</p><ol><li>Project &hyphen;<br>This sheet has only one row, and describes a set of samples uploaded together; the other sheets have one row per sample.</li><li>Sample &hyphen;<br>This sheet includes either the filename or metagenome name used for matching.</li><li>Library &hyphen;<br>This sheet includes either the metagenome (for WGS and WXS), mimarks-survey (for <span class="glossary" data-toggle="popover" data-title="16s" data-content="16S ribosomal RNA (or 16S rRNA) is a component of the 30S small subunit of prokaryotic ribosomes">16s<sup>[?]</sup></span> and amplicon) or metatranscriptome.</li></ol><h5>Sample sheet</h5><p style='clear: both;'>The sample sheet requires minimal information (including the sample name) about where and when the sample was taken. Note that some fields in the spreadsheet must be filled out with terms from a controlled vocabulary or in a certain way. Country and environment (biome, feature, material) fields require entries from curated ontologies, gazetteer and environmental ontology, respectively.</p><p style='clear: both;'>Figure <a href="#fig:project-spreadsheet-with-3-samples" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">project-spreadsheet-with-3-samples</a></p><p style='clear: both;'>shows the sample tab with three new samples (sample1, sample2, and sample3) added. Again red text in the first row indicates required fields.</p><h5>Mandatory fields</h5><p style='clear: both;'>Five fields must be completed.</p><ul><li>Country &hyphen;<br>e.g. United States of America, Netherlands, Australia, Uruguay</li><li>Latitude and longitude &hyphen; <br>e.g. [106.84517, -104.60667], [28Â° 42.306â²N, 88Â° 24.099â²W], [45.30 N, 73.35 W]</li><li>Biome &hyphen;<br>e.g. small lake biome, urban biome, mangrove biome. This term must be one of the terms from the bioportal ontology (<a href="http://bioportal.bioontology.org/ontologies/1069?p=terms&conceptid=ENVO%3A00000428" target=_blank>http://bioportal.bioontology.org/ontologies/1069?p=terms&conceptid=ENVO%3A00000428</a>). Terms that are not listed on this site are not valid.</li><li>Feature &hyphen;<br>e.g. city, fish farm, livestock-associated habitat, marine habitat, ocean basin, microbial mat. This term must be one of the terms from the bioportal ontology. Terms that are not listed on this site are not valid.</li></ul><h5>Library section</h5><p style='clear: both;'>The library section captures technical data on the preparation and sequencing done. You should choose the library tab to fill out ("metagenome'' for shotgun sequencing, "mimarks-survey'' for amplicon or "metatranscriptome") based on the type of sequencing done. These are separated as different sequencing techniques involving different metadata fields. Each row describes one library for one sample. The required fields are colored red.</p><p style='clear: both;'>The <b>sample_name</b> value in the library sheet must exactly match one of the values used in the sample sheet.</p><p style='clear: both;'>The <b>file_name</b> field holds the filename of the sequence file uploaded, or the filename to use for creating the demultiplexed file if you uploaded a multiplexed sequence file and have barcode sequences in the spreadsheet. This is used for mapping sequence files to metadata.</p><p style='clear: both;'>The <b>metagenome_name</b> field holds the name of the metagenome you are submitting. If the file_name field is empty, the metagenome_name will be used to map metadata to sequence files, in this case it would need to match the uploaded sequence filename without the file extension, e.g. a sequence file "test-sequence.fasta" would be mapped to the metadata in the row which has the metagenome_name value "test-sequence".</p><p style='clear: both;'>The <b>investigation_type</b> field is required to be "metagenome'' for shotgun metagenome samples, "mimarks-survey'' for amplicon studies or "metatrascriptome", reflecting which tab was filled out.</p><p style='clear: both;'>The type of sequencing instrument used is another required field. Values are, for example, Sanger, pyrosequencing, ABI-solid, 454, Illumina, assembled, other.</p><p style='clear: both;'>Again, only a limited number of fields are required. However, the more information you provide, the easier it is for you and others to understand any potential uses of your data and to understand why results appear in a particular way. It might, for example, allow understanding of specific biases caused by technology choices or sampled environments.</p><h5>Environmental Package (ep) sheet</h5><p style='clear: both;'>You can fill out one or more environmental metadata packages.  Currently we provide support for the following GSC environmental packages:</p><ul><li>Air</li><li>Built Environment</li><li>Host-associated</li><li>Human-associated</li><li>Human-oral</li><li>Human-skin</li><li>Human-gut</li><li>Human-vaginal</li><li>Microbial mat/biofilm</li><li>Miscellaneous natural or artificial environment</li><li>Plant-associated</li><li>Sediment</li><li>Soil</li><li>Wastewater sludge</li></ul><p style='clear: both;'>We strongly encourage users to submit rich metadata, but we understand the effort required in providing it. Using the environmental packages (which were designed and are used by practitioners in the respective field) should make it reasonably simple to report the essential metadata required to analyze the data. If there is no environmental package to report metadata for your specific sample, please contact MG-RAST staff: we will work with the GSC<a href="#citation_6" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[6]</a> to create the required questionnaire.</p><h3>Working with Projects and Collections</h3><p style='clear: both;'>Collections provide an efficient way to create multiple sets of metagenomes for analysis. For example, if you want to compare human gut with cow rumen samples, you probably want to see a dialogue like that in Figure <a href="#fig:collections-total-list1" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">collections-total-list1</a>.</p><a name='fig:collections-total-list1'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/collections-total-list1.png");' src='Images/collections-total-list1.png'></div><blockquote><p><small>View of the browse table with the collection column enabled. Clicking on the "..." at the right end of the table allows expanding the table columns.</small></p></blockquote><p style='clear: both;'>MG-RAST v3 provides a mechanism to make this happen. Users can create collections that are persistent across multiple sessions.</p><p style='clear: both;'>Below, we show how to define a collection that allows comparison of multiple datasets. Please note that collections are just shortcuts to the actual samples; they cannot be shared at this time.</p><p style='clear: both;'>Step 1: you start with the metadata browser (either on the front page or in the little menu block in the top right-hand corner), and click on the globe symbol. See Figure <a href="#fig:browse-for-metagenomes" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">browse-for-metagenomes</a> for the symbol.</p><a name='fig:browse-for-metagenomes'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 2in; cursor: pointer;' onclick='window.open("Images/browse-for-metagenomes.png");' src='Images/browse-for-metagenomes.png'></div><blockquote><p><small>Symbol for the MG-RAST metagenome browser</small></p></blockquote><p style='clear: both;'>Step 2: This will take you to the Browser dialogue, showing a large number of metagenomes (Figure <a href="#fig:browse-window" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">browse-window</a>).</p><a name='fig:browse-window'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 4in; cursor: pointer;' onclick='window.open("Images/collections-browse-window.png");' src='Images/collections-browse-window.png'></div><blockquote><p><small>MG-RAST metagenome browser</small></p></blockquote><p style='clear: both;'>Step 3: Clicking on biome will allow selecting a specific Biome (here we pick Animal associated).</p><p style='clear: both;'>This results in a list of metagenomes shown in </p><p style='clear: both;'>Figure <a href="#fig:collections-filter-by-biome" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">collections-filter-by-biome</a>.</p><a name='fig:collections-filter-by-biome'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/collections-filter-by-biome.png");' src='Images/collections-filter-by-biome.png'></div><blockquote><p><small>Filtering by BIOME information. </small></p></blockquote><p style='clear: both;'>The list of samples still shows too many samples when restricted to just animal associated metagenomes.</p><a name='fig:collections-filtered-but-too-many'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 4in; cursor: pointer;' onclick='window.open("Images/collections-filtered-but-too-many.png");' src='Images/collections-filtered-but-too-many.png'></div><blockquote><p><small>A reduced list of metagenomes for one BIOME. </small></p></blockquote><p style='clear: both;'>Step 4: To downselect, search for Twin to further restrict to samples from Peter Turnbaugh and Jeffrey Gordon's Human Twin study (see Figure <a href="#fig:collections-twin" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">collections-twin</a>).</p><a name='fig:collections-twin'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/collections-twin.png");' src='Images/collections-twin.png'></div><blockquote><p><small>Selecting a specific project to further reduce the number of datasets being displayed. </small></p></blockquote><p style='clear: both;'>Step 5: Clicking on the black shopping-cart symbol in the top right-hand corner will allow the creation of a new collection entry. The next step is naming the collection (see Figure <a href="#fig:Collections-how-to-save" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">Collections-how-to-save</a>.</p><p style='clear: both;'>Here we name the collection Twin Study and hit OK.</p><a name='fig:Collections-how-to-save'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/Collections-how-to-save.png");' src='Images/Collections-how-to-save.png'></div><blockquote><p><small>Saving a collection</small></p></blockquote><p style='clear: both;'>Step 6: Once the collection is added, the new collection will appear in the list of collections (in "Your Data Summary").</p><a name='fig:collections-finished'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/collections-finished.png");' src='Images/collections-finished.png'></div><blockquote><p><small>List of collections</small></p></blockquote><p style='clear: both;'>Step 7: Use collection in the Metagenome selection on the Analysis page. It is possible to analyze individual metagenomes or compare whole groups of metagenomes (see Figure <a href="#fig:using-collections" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">using-collections</a>).</p><a name='fig:using-collections'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/using-collections.png");' src='Images/using-collections.png'></div><blockquote><p><small>Comparing collections as groups.</small></p></blockquote><h3>Understanding Datasets</h3><p style='clear: both;'>Unfortunately not every sequencing run works equally well. Users of MG-RAST have provided data with</p><p style='clear: both;'>many different sources of error, allowing us to provide a number of tools to identify the most common errors.</p><p style='clear: both;'>The quality assessment tools described in Section <a href="#section:Quality" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">Quality</a> provide a good tool set for an initial data quality analysis. While many potential sources of error exist, some common problems can be easily identified with just the nucleotide histograms. If your data exhibits patterns like the ones described in Section <a href="#section:Quality" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">Quality</a>, there were likely to be problems with sequencing.</p><p style='clear: both;'>We frequently find datasets with high numbers of reads filtered out by the quality control. Below we list the major reasons for filtered reads:</p><ol><li>Artificial duplicate reads <br>The presence of significant amounts of ADRs hints at problems with a PCR step. Frequently a problem with 454 runs occurs, but problems are also seen with other platforms. For example, a set of DNA templates may be  copied many times during a PCR step, often consuming up to 80% of the entire dataset.</li><li>Filtered reads<br>If you have selected screening against a host organism (e.g., the human genome), reads matching that particular genome will be removed from the dataset. This action frequently consumes a large fraction of the sequence run. There are in vitro techniques to minimize the amount of host DNA in your sample. see <a href="#citation_33" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[33]</a>.</li></ol><h3>Drilling Down with the Workbench</h3><p style='clear: both;'>One of the new features of MGRAST v3 is the workbench. It is the main mechanism for exchanging subsets of data between analysis views. It also allows you to download the FASTA files of a selection of proteins.</p><p style='clear: both;'>When you initially go to the Analysis page (see Section <a href="#section:analysis-page" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">analysis-page</a>), your workbench will be empty. It is displayed as the leftmost tab in the data tabular view. So how do you get data into the workbench? There are two simple ways to select data subsets: from any generated table or from the drilldown of a barchart.</p><p style='clear: both;'>Try this example: Start by selecting the lean and obese mouse cecum samples (MG-RAST IDs 4440463.3 and 4440464.3) <a href="#citation_20" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[20]</a> in the data selection and creating a table. To do so, go to the Analysis page, and select the analysis view Organism Classification. Expand the metagenome selection by clicking the plus symbol next to metagenomes. Select public from the dropdown-box (to view only public data sets), and type "mouse'' into the filter box. Select the two samples, and click the button with the right arrow, then the ok button. The default data visualization is "table,'' so you can click the "generate'' button (Figure <a href="#fig:analysis-page-selecting-lean-and-obese" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">analysis-page-selecting-lean-and-obese</a>).</p><a name='fig:analysis-page-selecting-lean-and-obese'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/analysis-page-selecting-lean-and-obese.png");' src='Images/analysis-page-selecting-lean-and-obese.png'></div><blockquote><p><small>Screenshot of the Analysis page and Workbench tab. Users can search and select metagenomes to analyze, the annotation sources and parameters to set, and the analysis and visualization they want to perform.</small></p></blockquote><p style='clear: both;'>After a short wait, a new tab will appear in the tabview, showing the data table with organism classifications for the two samples. The last column of this table will have a button labeled "to workbench'' as the column header. Each cell in that column will have a checkbox. Checking a checkbox and clicking the "to workbench'' button will send the proteins identified by that row to the workbench.</p><p style='clear: both;'>Note that you have only one workbench and that putting a new set of proteins into it will replace the current content. What if you want to select all Bacteria: do you really need to click through all those checkboxes? No: you can use the grouping feature of the table, so you have to click only one checkbox per metagenome.</p><p style='clear: both;'>Above the table you will find a dropdown-box labeled "group table by'' (Figure <a href="#fig:table-group-by-class" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">table-group-by-class</a>). Select "domain,'' and the table will be grouped, so there is only one row per metagenome and domain.</p><a name='fig:table-group-by-class'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 2in; cursor: pointer;' onclick='window.open("Images/table-group-by-class.png");' src='Images/table-group-by-class.png'></div><blockquote><p><small>Using the tables to group results.</small></p></blockquote><p style='clear: both;'>Now check the two boxes in the "Bacteria'' rows, and click the "to workbench'' button (see Figure <a href="#fig:table-organism-abundance" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">table-organism-abundance</a>.</p><a name='fig:table-organism-abundance'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 3in; cursor: pointer;' onclick='window.open("Images/table-organism-abundance.png");' src='Images/table-organism-abundance.png'></div><blockquote><p><small>Use the table to select results you want to add to your workbench for further analyses.</small></p></blockquote><p style='clear: both;'>A pop-up message will appear, telling you how many proteins have been sent to the workbench. If you look at the tabular view now, you will notice that the workbench tab shows the number of proteins it currently contains (see Figure <a href="#fig:workbench" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">workbench</a>). If you click on that tab, you will get information about what the workbench contains. On this tab you will also find a "download as FASTA'' button.</p><a name='fig:workbench'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 3in; cursor: pointer;' onclick='window.open("Images/workbench.png");' src='Images/workbench.png'></div><blockquote><p><small>View of the workbench with a summary of the proteins that have been added.</small></p></blockquote><p style='clear: both;'>Besides being able to download the sequences of your selected proteins, you can also use them to generate other visualizations. For example, you can switch from organism to functional classification. To do so, simply check the "use proteins from workbench'' box in the data selection when generating a new visualization (e.g., a circular tree using the proteins we just buffered).</p><p style='clear: both;'>The table is not the only visualization that allows you to put a subselection into the workbench. You can also use the barchart for this purpose (Figure <a href="#fig:barchart-from-workbench" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">barchart-from-workbench</a>). Simply click on the "to workbench'' button next to the headline of a drilldown. Note that you cannot put the topmost barchart into the workbench because it is not yet a subselection of proteins.</p><a name='fig:barchart-from-workbench'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 3in; cursor: pointer;' onclick='window.open("Images/barchart-from-workbench.png");' src='Images/barchart-from-workbench.png'></div><blockquote><p><small>Using barcharts to download or add results to workbench.</small></p></blockquote><h3>Downloads from the Workbench</h3><p style='clear: both;'>The workbench feature stores subselections of data and allows those to be used as input for further selection or displays: for example, select all E. coli reads and then display the functional categories present just in E. coli reads across multiple data sets. In addition, the workbench allows downloading the annotated reads for the subselection stored in the workbench as fasta (Figure <a href="#fig:workbench-download" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">workbench-download</a>).</p><a name='fig:workbench-download'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 3in; cursor: pointer;' onclick='window.open("Images/workbench-download.png");' src='Images/workbench-download.png'></div><blockquote><p><small>Download of selected reads, via the workbench, using the name space of the selection.</small></p></blockquote><p style='clear: both;'>Once processing datasets in MG-RAST is finished, a download page is created for the project. On this page all data products created during the computation are made available as files. In addition, datasets that have been published in MG-RAST have links to an ftp site at the top of this page where you can download additional information.</p><h3>Viewing Evidence</h3><p style='clear: both;'>For individual proteins, the MG-RAST page allows users to retrieve the sequence alignments underlying the annotation transfers (see Figure <a href="#fig:blat-alignment" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">blat-alignment</a>).</p><p style='clear: both;'>Using the M5nr <a href="#citation_29" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[29]</a> technology, users can retrieve alignments against the database of interest with no additional overhead.</p><a name='fig:blat-alignment'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/blat-alignment.png");' src='Images/blat-alignment.png'></div><blockquote><p><small>BLAT hit details with alignment.</small></p></blockquote><h3>MG-RAST Output</h3><p style='clear: both;'>Users can access the data in MG-RAST in three ways.</p><ul><li>Through the website (which is authenticated)</li><li>Through the MG-RAST API (which is also authenticated)</li></ul><a name='table:access-modalities'></a><div style='text-align: center;'><table class='table table-bordered'><h5>Differences between the various access modalities</h5><tr><th style='text-align: left'>Service </th><th style='text-align: center'> Web Interface </th><th style='text-align: center'> API </th><th style='text-align: center'> FTP Server </th><th style='text-align: left'> Comment</th></tr><tr><td style='text-align: left'>public data  access  	  </td><td style='text-align: center'>  Y                   </td><td style='text-align: center'>  Y     </td><td style='text-align: center'>  Y </td><td style='text-align: left'>&nbsp;</td></tr><tr><td style='text-align: left'>private data  access   </td><td style='text-align: center'>  Y                   </td><td style='text-align: center'>  Y     </td><td style='text-align: center'>  N </td><td style='text-align: left'>&nbsp;</td></tr><tr><td style='text-align: left'>upload                      </td><td style='text-align: center'>  Y                    </td><td style='text-align: center'>  T     </td><td style='text-align: center'> N </td><td style='text-align: left'> Unless specifically arranged by help desk</td></tr></table></div><p style='clear: both;'>Access to private or shared data requires either password access via the web interface or a webkey generated for access via the API.</p><p style='clear: both;'>All of the data files available on the website would be available via the urls returned by</p><p style='clear: both;'>a query to</p><p style='clear: both;'>http://api.metagenomics.anl.gov/1/download/mgm4450212.3</p><p style='clear: both;'>This returns a JSON data structure with urls for all the data files. For instance, the file</p><p style='clear: both;'>900.abundance.organism.gz</p><p style='clear: both;'>can be retrieved from</p><p style='clear: both;'>http://api.metagenomics.anl.gov/1/download/mgm4450212.3?file=900.5</p><p style='clear: both;'>Note: This is a public job which requires no authorization; private jobs can be accessed by providing your valid account webkey in the auth field in the GET request.</p><p style='clear: both;'>In general, we preserve the inputs and outputs for every stage of the pipeline for download and to ensure reproducibility.</p><p style='clear: both;'>An example of why this is useful is the use of dereplicated reads for error estimation by DRISEE (see Section <a href="#section:DRISEE" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">DRISEE</a>) or the LCA (see Section <a href="#section:LCA" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">LCA</a>) algorithm being used to reinterpret the similarities for a given cluster.</p><h4>Data products on the website</h4><p style='clear: both;'>Users can obtain </p><p style='clear: both;'>various data products from the website.</p><ul></ul><h4>FTP server</h4><p style='clear: both;'>All public data is made available on the FTP server.</p><p style='clear: both;'>The FTP server provides a number of services:</p><ul><li>project &hyphen;<br>area where public data is made available for download, sorted into projects</li><li>data &hyphen;<br>data created to enable MG-RAST (e.g., the M5nr is made available here)</li><li>tools &hyphen;<br>tools developed by the MG-RAST team are made available here, in addition to github</li></ul><p style='clear: both;'>A project directory on the FTP server for the public project 128 (<a href="ftp://ftp.metagenomics.anl.gov/projects/128/" target=_blank>ftp://ftp.metagenomics.anl.gov/projects/128/</a>)</p><p style='clear: both;'>is shown in Figure <a href="#fig:ftp-server-project-view" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">ftp-server-project-view</a>.</p><a name='fig:ftp-server-project-view'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/ftp-server-project-view.png");' src='Images/ftp-server-project-view.png'></div><blockquote><p><small>Listing of the project directory for the public project 128.</small></p></blockquote><h4>Downloads</h4><p style='clear: both;'>One of the critical insights when developing MG-RAST version 3 was the need to make a maximum number of data products available for download for downstream analysis. For this purpose we have created the download page that contains all automatically created data products in a single location for each metagenome. In addition, a global download page provides access to all public datasets grouped by projects.</p><p style='clear: both;'>In the Appendix (see Appendix <a href="#chapter:downloads" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">downloads</a>),</p><p style='clear: both;'>using a specific example (MG-RAST ID: 4465825.3),</p><p style='clear: both;'>we list the data products available on the download page for each metagenome.</p><p style='clear: both;'>The general paradigm is to make all files available that are generated during the automated analysis. In addition, the user-submitted data and metadata are made available.</p><h3>Identifiers and Linking to MG-RAST</h3><h4>Identifiers</h4><a name='section:identifier'></a><p style='clear: both;'>MG-RAST automatically assigns a unique identifier to every dataset submitted. Upon completion of the automated pipeline, datasets can be viewed via the web interface by using the identifiers.</p><p style='clear: both;'>The dataset identifiers are of the form <span class="mono">integer prefix</span>.<span class="mono">revision</span>.</p><p style='clear: both;'>An example is <span class="mono">4440283.3</span>.</p><p style='clear: both;'>In addition to individual datasets, projects (groups of datasets) can be addressed with simple numerical project identifiers.</p><p style='clear: both;'>An example is <span class="mono">128</span>.</p><h4>Linking to MG-RAST</h4><a name='section:linkin'></a><p style='clear: both;'>Because future versions of MG-RAST may change, we provide a link-in mechanism as a stable way of linking to MG-RAST. To link to datasets or projects in MG-RAST, users should always use the <span class="mono">linkin.cgi</span>, especially in publications.</p><p style='clear: both;'>Note: Do not use the URL that is displayed in the browser when browsing the site.</p><a name='fig:linkin.cgi'></a><p style='clear: both;'>For example, for the public dataset with metagenome ID <span class="mono">4440283.3</span> the URL is:</p><p style='clear: both;'><a href="http://metagenomics.anl.gov/linkin.cgi?metagenome=4440283.3" target=_blank>http://metagenomics.anl.gov/linkin.cgi?metagenome=4440283.3</a>.</p><p style='clear: both;'>For the public project with project ID  <span class="mono">128</span> the URL is:</p><p style='clear: both;'><a href="http://metagenomics.anl.gov/linkin.cgi?project=128" target=_blank>http://metagenomics.anl.gov/linkin.cgi?project=128</a>.</p><p style='clear: both;'>These URLs provides a stable method of linking to data that does not require the viewer to have an MG-RAST account. </p><h3>Privacy, Sharing, and Publication</h3><h4>Privacy</h4><p style='clear: both;'>By default, a user's data is not visible to others; the user needs to explicitly grant permission for the data to be visible to anyone on the Internet, either by sharing with individuals or by making it public through the MG-RAST website. Only the owner of a dataset (the original submitter) can make a dataset public and this requires explicit action on their part, MG-RAST does not make data public without this action.</p><p style='clear: both;'>Owners can grant anonymous access to manuscript reviewers  (see Section <a href="#section:reviewer_sharing" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">reviewer_sharing</a>).</p><p style='clear: both;'>The web interface allows sharing and publication of data, requiring the presence of minimal metadata</p><p style='clear: both;'>(see Section <a href="#section:metadata" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">metadata</a>) for data that is made public. </p><p style='clear: both;'>Data can be shared or made public only after the computation has finished.</p><h4>Sharing</h4><h5>Sharing with individual users</h5><a name='section:user_sharing'></a><p style='clear: both;'>Data and analyses can be shared with individual users. To share data, users simply enter their email address via clicking the <span class="mono">Sharing</span> link on the Metagenome Overview page. The dialogue shown in Figure <a href="#fig:sharing" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">sharing</a> will allow entering email addresses.</p><a name='fig:sharing'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 6in; cursor: pointer;' onclick='window.open("Images/sharing.png");' src='Images/sharing.png'></div><blockquote><p><small>Dialogue showing the sharing mechanism.The mechanism requires a valid email address for the user with whom the data is to be shared. A list of users with access to the data is displayed at the bottom on the page.</small></p></blockquote><p style='clear: both;'>Both individual jobs as well as entire projects containing one or more jobs can be shared using a similar mechanism from the Job Overview and Project pages respectively.</p><p style='clear: both;'>As shown in Figure <a href="#fig:Data-sharing-in-mg-rast" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">Data-sharing-in-mg-rast</a>, we tend to see dataset sharing between small groups of users.</p><a name='fig:Data-sharing-in-mg-rast'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 3in; cursor: pointer;' onclick='window.open("Images/Data-sharing-in-mg-rast.png");' src='Images/Data-sharing-in-mg-rast.png'></div><blockquote><p><small>Data sets shared in MG-RAST by users (orange dots), shown as connecting edges.</small></p></blockquote><h5>Anonymous sharing with reviewers</h5><a name='section:reviewer_sharing'></a><p style='clear: both;'>To grant manuscript reviewers access to a project while preserving their anonymity click on the 'Create Reviewer Access Token' button on the project page. This button is visible only to the owner of a project by clicking on the 'Share Project' link. It will generate a token that can be sent to the publisher to pass on to reviewers. When a reviewer receives the token from the publisher they need to use the included link to access MG-RAST. If necessary the reviewer will need to register for an account and their account will have anonymous access to the project. The number of reviewers who have accessed the project is displayed to the owner in the list of users the project is shared with, but the identity of the reviewers is not disclosed. The owner of the project can revoke the token at any time to disable access.</p><h4>Publishing</h4><a name='section:publishing'></a><p style='clear: both;'>MG-RAST provides a mechanism to make data and analyses publicly accessible. All sequence data, metadata, analyses, and analyses files for a dataset will be freely available for download once it is made public. Only the submitting user can make data public on MG-RAST and once this is done it can not be reversed. Metadata is mandatory for dataset publication (see Section <a href="#section:metadata" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">metadata</a>).</p><p style='clear: both;'>The following checklist describes the process of making MG-RAST datasets and projects public:</p><ol></ol><p style='clear: both;'>The link for a public project which should be used in a publication is listed near the top of the project page, e.g.:</p><p style='clear: both;'><a href="http://metagenomics.anl.gov/metagenomics.cgi?page=MetagenomeProject&project=128" target=_blank>http://metagenomics.anl.gov/metagenomics.cgi?page=MetagenomeProject&project=128</a></p><p style='clear: both;'>where 128 is the MG-RAST project ID.</p><p style='clear: both;'>The link for individual public metagenomes which should be used in a publication is listed near the top of the metagenome overview page, e.g.:</p><p style='clear: both;'><a href="http: //metagenomics.anl.gov/linkin.cgi?metagenome=4440283.3" target=_blank>http: //metagenomics.anl.gov/linkin.cgi?metagenome=4440283.3</a></p><p style='clear: both;'>where 4440283.3 is the MG-RAST metagenome ID.</p><p style='clear: both;'>The publication to cite for MG-RAST is at <a href="http://www.biomedcentral.com/1471-2105/9/386" target=_blank>http://www.biomedcentral.com/1471-2105/9/386</a>.</p><h3>Contacting the MG-RAST team and help desk</h3><a name='section:contact-mgrast'></a><p style='clear: both;'>The MG-RAST project uses a ticket system to manage interactions with users, please use the email address for the MG-RAST project shown in Figure <a href="#fig:mgrastemail" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">mgrastemail</a>.</p><a name='fig:mgrastemail'></a><div style='text-align: center; margin-bottom: 10px;'><img style='width: 3in; cursor: pointer;' onclick='window.open("Images/mgrastemail.png");' src='Images/mgrastemail.png'></div><blockquote><p><small>The email address for the MG-RAST project. Note that it was inserted into this document as an image and can not be copied as text, you will have to type it.</small></p></blockquote><p style='clear: both;'>We recommend including as much detail as possible into your emails to the help-desk, details like account names, MG-RAST identifiers will help us identify any issues and speed up resolving them. </p><p style='clear: both;'>Below are examples of the types of details we would like to receive:</p><ul><li>your name </li><li>your account name for MG-RAST (please do NOT include your password or webkey)</li><li>a clear text description of your problem</li><li>any MG-RAST identifiers (those are the 444xxxx.3 numbers)</li><li>any project numbers</li><li>the browser and which version you are using, if the problem relates to the web site</li><li>what platform your data was created on</li><li>if your data was a failure in the web site, what time the failure occurred</li><li>the URL and name of the page you were viewing</li></ul></section><section id='navitem_4'><h2>FAQ</h2><p style='clear: both;'>The answers to some of these Frequently Asked Questions can be found elsewhere in this manual, they are listed here for users who would like  a quick answer to a simple question. Other sections of the manual will generally contain more detail than the answers in this chapter. Some answers are just links to relevant sections in other chapters.</p><h3>General</h3><h4>What is MG-RAST?</h4><p style='clear: both;'>The MG-RAST server is an open source system for annotation and comparative analysis of metagenomes. Users can upload raw sequence data in fasta format; the sequences will be normalized and processed and summaries automatically generated. The server provides several methods to access the different data types, including phylogenetic and metabolic reconstructions, and the ability to compare the metabolism and annotations of one or more metagenomes and genomes. In addition, the server offers a comprehensive search capability. Access to the data is password protected, and all data generated by the automated pipeline is available for download in a variety of common formats.</p><h4>What kinds of data sets does MG-RAST analyze?</h4><p style='clear: both;'>MG-RAST is designed to annotate a large set of nucleotide sequencesÐnot a complete genome and not amino acid sequences. The RAST server should be used if you want to annotate complete, or nearly complete prokaryotic genomes. Version 3.2 accepts reads of length 75bp and up, and is capable of handling sequences of several dozen kilobases. For whole metagenome shotgun data we use a gene prediction step that is not suitable for eukaryotes, for that reason do not expect MG-RAST v3.2 to work with eukaryotic data sets or for the eukaryotic subsets of your data.</p><h4>How many metagenomes can I submit?</h4><p style='clear: both;'>We do not restrict user submission of samples. However, the computation required is massive and samples are processed on a first-come, first-serve basis. MG-RAST v3 is over 200 times faster than the previous version. We will also provide a CLOUD client (shortly after the initial release) that connects to MG-RAST and will allow you to add processing power to your jobs in MG-RAST.</p><h4>Can I use MG-RAST as a repository for my metagenomic data?</h4><p style='clear: both;'>MG-RAST has become an unofficial repository for metagenomic data, providing a means to make your data public so that it is available for download and viewing of the analysis without registration, as well as a static link that you can use in publications. It also requires that you include experimental metadata about your sample when it is made public to increase the usefulness to the community. We undertake to maintain public datasets within MG-RAST and they are not subject to deletion.</p><h4>Who should I contact with questions or problems with MG-RAST?</h4><p style='clear: both;'>All questions, comments or problems regarding MG-RAST should be directed to our support team using either the letter symbol in the navigation toolbox or via email to: <span class="mono">mg-rast at mcs.anl.gov</span>.</p><h4>How should I link to MG-RAST in a publication?</h4><p style='clear: both;'>You can provide a stable link to an MG-RAST job or project using the following URLs:</p><p style='clear: both;'><span class="mono">http://metagenomics.anl.gov/linkin.cgi?metagenome=</span></p><p style='clear: both;'><span class="mono">http://metagenomics.anl.gov/linkin.cgi?project=</span></p><p style='clear: both;'>For example, for the metagenome ID 4440283.3 the URL is:</p><p style='clear: both;'><a href="http://metagenomics.anl.gov/linkin.cgi?metagenome=4440283.3" target=_blank>http://metagenomics.anl.gov/linkin.cgi?metagenome=4440283.3</a></p><p style='clear: both;'>This URL provides a stable method of linking to your data which does not require the viewer to have an MG-RAST account. Please do not use the URL you see when you are browsing the site.</p><p style='clear: both;'>Note that by default your data is not visible to others, you will need to explicitly grant permission for it to be visible to anyone on the internet by making it public through the MG-RAST website.</p><h4>Who should I cite when I use this service?</h4><p style='clear: both;'>See Section <a href="#section:MG-RAST-citation" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">MG-RAST-citation</a>.</p><h4>Is MG-RAST open source and can I install it locally?</h4><p style='clear: both;'>MG-RAST is indeed open source. We make the current stable versions available on github: <a href="https://github.com/MG-RAST/" target=_blank>https://github.com/MG-RAST/</a></p><p style='clear: both;'>However MG-RAST is a complex system to install (note: we have not been funded to create a readily installable version) and even more complex to operate. We advise against attempting to create a private installation and can not provide any help installing MG-RAST locally.</p><p style='clear: both;'>If you are a biologist worried about runtime of your jobs, there is a way to run your jobs on computational resources provided by you that will significantly help. Please contact us at our usual address mg-rast at mcs.anl.gov to inquire about ways of setting this up.</p><p style='clear: both;'>If you are a bioinformatician and want to contribute code or test alternatives for individual steps, we are currently preparing a system that will make all components of MG-RAST easily accessible. This is not currently sea-worthy. Same as with the biologists, please contact us at mg-rast at mcs.anl.gov for details.</p><h4>Who should I cite when I use this service?</h4><p style='clear: both;'>See Section <a href="#section:MG-RAST-citation" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">MG-RAST-citation</a>.</p><h4>Is MG-RAST open source and can I install it locally?</h4><p style='clear: both;'>MG-RAST is indeed open source. We make the current stable versions available on github: <a href="https://github.com/MG-RAST/" target=_blank>https://github.com/MG-RAST/</a></p><p style='clear: both;'>However MG-RAST is a complex system to install (note: we have not been funded to create a readily installable version) and even more complex to operate. We advise against attempting to create a private installation and can not provide any help installing MG-RAST locally.</p><p style='clear: both;'>If you are a biologist worried about runtime of your jobs, there is a way to run your jobs on computational resources provided by you that will significantly help. Please contact us at our usual address mg-rast at mcs.anl.gov to inquire about ways of setting this up.</p><p style='clear: both;'>If you are a bioinformatician and want to contribute code or test alternatives for individual steps, we are currently preparing a system that will make all components of MG-RAST easily accessible. This is not currently sea-worthy. Same as with the biologists, please contact us at mg-rast at mcs.anl.gov for details.</p><h4>Where can I find version 3.1.2?</h4><p style='clear: both;'>The difference between version 3.1.2 (previous version) and 3.2 (this version) are added functionality and some new defaults. Since there are no changes to the data we do not provide access to the old version.</p><h3>Accounts</h3><h4>Why do I need to register for this service?</h4><p style='clear: both;'>If you do not plan to submit data for analysis to MG-RAST and only want to browse data which is publicly available there is no need to register. Otherwise we request that users register, with a valid email address, so we can contact you once the computation is finished or in case user intervention is required.</p><h4>I have forgotten my password, what should I do?</h4><p style='clear: both;'>In the navigation toolbox (top right corner of the webpage) there is a 'Forgot?' link displayed. Click on this and enter your login and the email address you registered with MG-RAST. A changed password will be sent by email to this address. For security purposes you should login and change this new password as soon as you receive the email. </p><h4>Can I change my account information?</h4><p style='clear: both;'>Yes, you can change or modify your password, email address, name and funding source for your account. Login and make the changes on the account management page.</p><h3>Upload and Submission</h3><h4>Can I upload files to my inbox through the MG-RAST API?</h4><p style='clear: both;'>Yes.  You can upload files to your user inbox using the MG-RAST API with the command-line tool cURL, invoked as:</p><pre>curl -H "auth: webkey" -X POST -F "upload=@/path_to_file/metagenome.fasta"
          "http://api.metagenomics.anl.gov/1/inbox/" > curl_output.txt
</pre><p style='clear: both;'>where you need to substitute `webkey' with the unique string of text generated by MG-RAST for your account. Your webkey is valid for a limited time period and ensures that the uploads you perform from the command line are recognized as belonging to your MG-RAST account and placed in the correct inbox.</p><h4>What type of sequence files should I upload?</h4><p style='clear: both;'>Your sequence data can be in FASTA, FASTQ or SFF format. These are recognized by the file name extension with valid extensions for the appropriate formats .fasta, .fna, .fastq, .fq, and .sff and FASTA and FASTQ files need to be in plain text ASCII.</p><p style='clear: both;'>Compressing large files will reduce the upload time and the chances of a failed upload, you can use gzip (.gz), bzip2 (.bz2) Zip (.zip less than 4 GB in size) as well as tar archives compressed with gzip (.tar.gz) or bzip2 (.tar.bz2), rar files are not accepted.</p><p style='clear: both;'>We suggest you upload raw data (in FASTQ or SFF format) and let MG-RAST perform the quality control step, see Section <a href="#section:mgrast_pipeline_details" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">mgrast_pipeline_details</a> for details.</p><h4>What type of sequence files should I NOT upload?</h4><p style='clear: both;'>MG-RAST will not analyze the following:</p><ul><li> protein sequences,</li><li> WGS reads \textless  75bp,</li><li> complete genomes,</li><li> sequence data less than 1Mbp,</li><li> sequences containing alignment information,</li><li> ABIsolid sequences in colorspace,</li><li> rar compressed files,</li><li> Zip files over 4GB,</li><li> Word documents,</li><li> Rich Text Format files, and</li></ul><h4>How do I prepare my metadata for upload?</h4><p style='clear: both;'>You can submit metadata for your samples during the upload/submission process. The metadata is transferred to MG-RAST in a spreadsheet in which you can enter metadata for one or more samples along with information about the project the samples should be placed in. Step one in the first section, `Prepare data', has the empty metadata spreadsheet template available for download with the required fields labeled in red. The metadata is hierarchical with three levels, project, sample and library. There has to be a sequence file corresponding to each library entry and the sequence filename must match the library file_name fields or match the library metagenome_name fields minus extension. Once you have filled out the spreadsheet with metadata you can upload it along with the sequence files to your inbox with the MG-RAST uploader.</p><h4>Will my metadata file in .xls format work OK?</h4><p style='clear: both;'>Yes, the site is designed to handle .xls metadata files and we have successfully tested uploading and validating .xls files. The metadata template file we provide is a .xlsx file and that is the preferred format</p><p style='clear: both;'>If you do experience problems with a .xls file being recognized, Microsoft provides a convertor to the .xslx format:</p><ul><li> for Mac: <a href="http://www.microsoft.com/mac/downloads?pid=Mactopia_AddTools\&fid=6B9238E1-CF69-48C4-BF2D-C4A8ACEEE520" target=_blank>http://www.microsoft.com/mac/downloads?pid=Mactopia_AddTools\&fid=6B9238E1-CF69-48C4-BF2D-C4A8ACEEE520</a></li></ul><h4>How are the projects listed on the upload page during submission selected?</h4><p style='clear: both;'>During the submission process, you can choose to place the new datasets in an existing project. All the projects you have write access to will be listed for selection, this includes all the projects you own as well as projects owned by other users for which you have been granted write access.</p><p style='clear: both;'>You can also specify a particular project from this list in the metadata template file or create a new project for your dataset(s) by typing in the name.</p><h4>How much time will it take to upload my data to MG-RAST?</h4><p style='clear: both;'>Based on observed values, upload times per 1GB (10<sup>9</sup> bytes) vary from 2 minutes to over an hour with typical times being 10 to 15 minutes. Your experience will vary depending on the speed of your connection to the internet and the quality of service in your region.</p><p style='clear: both;'>The fastest times that could be expected for the technology you are using is listed in table <a href="#table:upload_speeds" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">upload_speeds</a>. In practice the time taken will be more than indicated in the table.</p><a name='table:upload_speeds'></a><div style='text-align: center;'><table class='table table-bordered'><h5>Upload speeds for different technologies</h5><tr><th style='text-align: center'><b>Technology</b> </th><th style='text-align: left'> <b>Rate</b> </th><th style='text-align: left'> <b>Time for 1GB Upload</b> </th></tr><tr><td style='text-align: center'>Modem 14.4 (2400 baud) </td><td style='text-align: left'> 14.4 kbit/s </td><td style='text-align: left'> 154 hours </td></tr><tr><td style='text-align: center'>ADSL Lite </td><td style='text-align: left'> 1.5 Mbit/s </td><td style='text-align: left'> 1.5 hours </td></tr><tr><td style='text-align: center'>Ethernet </td><td style='text-align: left'> 10 Mbit/s </td><td style='text-align: left'> 13.33 minutes </td></tr><tr><td style='text-align: center'>T3 </td><td style='text-align: left'> 44.74 Mbit/s </td><td style='text-align: left'> ~3 minutes </td></tr><tr><td style='text-align: center'>Fast Ethernet </td><td style='text-align: left'> 100 Mbit/s </td><td style='text-align: left'> 1.33 minutes </td></tr></table></div><h4>Do I need to compress my files before uploading to MG-RAST?</h4><p style='clear: both;'>It is not required that you compress your files before uploading to MG-RAST, but it is highly recommended.</p><p style='clear: both;'>Compressing your sequence data using Zip or gzip before it is uploaded will reduce the time required for the upload. The compression rate depends on the nature of the sequences, typical compression rates for uploaded sequence data that we have observed is between 30-35%. This means the time taken for the upload may be reduced by a third or even more. On a slow connection where uploading 1GB takes over an hour this could be a considerable reduction in time. In addition, the shortened time will also reduce the chance of a failed upload if something goes wrong.</p><h4>What does the 'Join paired-ends' function do?</h4><p style='clear: both;'>The `Join paired-ends' function on the Upload page allows users to merge two fastq files which represent paired end reads from the same sequencing run. The fastq-join utility (<a href="http://code.google.com/p/ea-utils/wiki/FastqJoin" target=_blank>http://code.google.com/p/ea-utils/wiki/FastqJoin</a>) is used to merge mate-pairs with a minimum overlap setting of 8bp and a maximum difference of 10% (parameters: -m 8 -p 10).  There is an option to retain or remove the pairs which do not overlap Ñ the `remove' option drops paired reads for which no overlap is found and the `retain' option will keep non-overlapping paired reads in your output file as separate individual (non-joined) sequences.  There is also an option to include an index file (if you have one) that contains the barcode for each mate-pair.  If this file is included, the barcodes will be reverse-complemented and then prepended to the output sequences.</p><h4>What does the ÒassembledÓ pipeline option do?</h4><p style='clear: both;'>The ÒassembledÓ pipeline option allows users to submit sequence data under a slightly altered analysis pipeline that is more appropriate for assembled sequences. Your assembled contigs should be uploaded in FASTA format and should include the abundance of each contig in your dataset with the following format:</p><pre>>sequence_number_1_[cov=2]
CTAGCGCACATAGCATTCAGCGTAGCAGTCACTAGTACGTAGTACGTACC...
>sequence_number_2_[cov=4]
ACGTAGCTCACTCCAGTAGCAGGTACGTCGAGAAGACGTCTAGTCATCAT...
</pre><p style='clear: both;'>The abundance information must be appended without spaces to the end of the sequence name (also without whitespace) in the format</p><pre>_[cov=n]
</pre><p style='clear: both;'>where `n' is the coverage or abundance of each contig.</p><h4>Can I use the coverage information in my Velvet sequence file?</h4><p style='clear: both;'>Yes, coverage information can be included in the header lines of FASTA-formatted files, for the exact format see the FAQ entry on the assembled pipeline.</p><p style='clear: both;'>The following unix command:</p><p style='clear: both;'> </p><pre>cat contigs.fa |
   sed 's/_cov_\([0-9]*\).[0-9]*/_[cov=\1]/;' > Assembly-formatted-for-MGRAST.fa
</pre><p style='clear: both;'>should transform Velvet's default FASTA output into MG-RAST's preferred output.</p><p style='clear: both;'>Adding one more term:</p><p style='clear: both;'> </p><pre>cat contigs.fa | 
     sed 's/_cov_\([0-9]*\).[0-9]*/_[cov=\1]/;
          s/NODE/Assembly-and-sample-name/' > Assembly-formatted-for-MGRAST.fa
</pre><p style='clear: both;'>will give the contigs better names than NODE_4_etc., substitute your information for 'Assembly-and-sample-name'.</p><h3>Job processing</h3><h4>How long does it take to analyze a metagenome?</h4><p style='clear: both;'>The answer depends on three factors:</p><ul><li> the priority assigned to your dataset,</li><li> the size of your dataset, and</li></ul><p style='clear: both;'>In practice the time taken will range between a few hours and a week.</p><h4>How is the job processing priority assigned?</h4><p style='clear: both;'>MG-RAST assigns a priority to each dataset which will influence the order in which datasets are selected for processing as well as the processing speed for individual stages in the analysis pipeline. The priority of processing a dataset is based on its usefulness to the scientific community and is estimated using a combination of the amount of metadata supplied and the length of time before the dataset will be made public. The highest priority is given to datasets with complete metadata that will be made public immediately.</p><h3>Analysis pipeline</h3><h4>How is the dereplication step performed?</h4><p style='clear: both;'>The dereplication step is performed to remove replicates which can be produced during sequencing. MG-RAST identifies two reads as replicates if they have 100% identity over the first 50 basepairs. This step is optional and you should skip it for amplicon data.</p><h4>What does the ÒdemultiplexÓ function do?</h4><p style='clear: both;'>The `demultiplex' function on the Upload page gives users the ability to demultiplex a multiplexed sequence file. The user enters the multiplexed sequence file and a bar codes file. A process is then run that separates out sequences, based upon bar codes, into separate sequence files. The separate sequence files are then turned into separate jobs in MG-RAST upon submission..</p><h3>Analysis results</h3><h4>What annotations does MG-RAST display?</h4><p style='clear: both;'>At the moment, the annotations provided by MG-RAST are annotations produced by the MG-RAST v3.2 analysis pipeline. Different pipelines (and different pipeline strategies) may produce different results, and the results of different annotation strategies are notoriously different to reconcile. Some users have reported and published using annotations that differ from those produced by MG-RAST; we provide the MG-RAST annotations. While in theory the various annotation tools and approaches do similar things (annotating reads based on similarity to sequences in the public databases), the various approaches can provide significantly different descriptions, particularly at the species level.</p><h4>Why donÕt the numbers of annotations add up to the number of reads?</h4><p style='clear: both;'>See Section <a href="#section:annotation_numbers" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">annotation_numbers</a>.</p><h4>Is the alignment length in amino acids or in nucleotides?</h4><p style='clear: both;'>For the protein similarities against the protein databases, alignment length is in amino acids.  For the nucleic acid similarities against the RNA databases, the alignment length is in nucleotides.</p><h4>Why am I seeing RNA similarities in my shotgun dataset?</h4><p style='clear: both;'>MG-RAST identifies sequences similar to known RNA sequences in shotgun data and annotates them in addition to providing protein function annotation and protein-derived taxonomic annotation.  Your mileage may vary.</p><h4>Why am I seeing protein similarities in my RNA dataset?</h4><p style='clear: both;'>These are called "false positives''.   We fall back on human judgment when computers give results that donÕt make sense.</p><h4>Why donÕt you suppress the false positives?</h4><p style='clear: both;'>If we suppress protein similarities when we think a dataset is RNA, we will sometimes make mistakes, and suppress protein similarities on a dataset that is, say, a metatranscriptome, for which the protein similarities are the principal objective.   These might be called "false negatives'', and our users don't want that.</p><h4>What do all those symbols in the similarities table mean?</h4><p style='clear: both;'>The MG-RAST system was designed to annotate large datasets;  the similarities output is designed for the convenience of the MG-RAST system and not the end user.   MG-RAST uses 32-character symbols like this <span class="mono">28614b98db4f4efc13b8b20b21ee9b95</span> (md5 protein identifiers) as the labels for protein sequences, regardless of database. </p><h4>Can I run a BLAST search against all public metagenomes?</h4><p style='clear: both;'>No.   Such a search is too computationally expensive. But you can find public metagenomes that contain proteins that hit your favorite sequence from the Search page.</p><h3>Download</h3><h4>Where is the table of reads with the annotation for each read?</h4><p style='clear: both;'>MG-RAST versions 1 and 2 had this type of output, but MG-RAST v3 does not.   MG-RAST version 3 has been optimized for large (Gbase+) datasets, and per-read annotation for large datasets is extremely bulky and difficult to interpret. The per-read annotations are not stored in a file on the server, but can be downloaded using the MG-RAST API.</p><h4>Where can I download the results of the metagenome analysis?</h4><p style='clear: both;'>Every completed MG-RAST dataset has a page where you can download the files produced by the different stages of the analysis, click on the link on the metagenome overview page. Datasets which have been made public have links to an ftp site at the top of this download page where you can access additional information.</p><h4>How do I download everything?</h4><p style='clear: both;'>As of April 2014 we have over 7 x 10<sup>12</sup>  bases of public sequence data, so you might want to consider if all the data is really what you need to answer your research question.</p><p style='clear: both;'>Public datasets, including sequence data and annotation data products, are available from our ftp site, and are organized by project:</p><p style='clear: both;'><a href="ftp://ftp.metagenomics.anl.gov/projects/" target=_blank>ftp://ftp.metagenomics.anl.gov/projects/</a></p><p style='clear: both;'>and the projects can be browsed here:</p><p style='clear: both;'><a href="http://metagenomics.anl.gov/metagenomics.cgi?page=MetagenomeProject" target=_blank>http://metagenomics.anl.gov/metagenomics.cgi?page=MetagenomeProject</a></p><h3>Privacy</h3><h4>Who can access my uploaded data?</h4><p style='clear: both;'>Your uploaded data will remain confidential as long as you do not share it with other users. You will have the ability to share the data with individuals or publish it to the MG-RAST community.</p><h4>Will my private jobs ever be deleted?</h4><p style='clear: both;'>Currently MG-RAST policy is that private jobs will not be deleted for 120 days after submission as mentioned in the Terms of Service.</p><p style='clear: both;'>We do not enforce the 120 days as a strict deadline and your private jobs theoretically can remain in the system indefinitely, we will not delete your job without giving you ample warning.</p><p style='clear: both;'>You are strongly encouraged to make your data public once it has been published to ensure it will never be considered for deletion.</p><h4>How do I make a job public?</h4><p style='clear: both;'>There is a `make public' button on the metagenome overview page accessed by clicking on the MG-RAST ID on the metagenome browse page. Making a dataset public requires entering the relevant metadata without which the dataset is of limited use. The website will lead you through the process of entering metadata (if you have not done so earlier) and making the dataset public.</p><h4>Will my public jobs ever be deleted?</h4><p style='clear: both;'>No, we will not delete MG-RAST jobs which have been made public.</p><h3>Webkey</h3><h4>What is an MG-RAST webkey?</h4><p style='clear: both;'>See Section <a href="#section:webkey" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">webkey</a>.</p><h4>How do I generate a webkey?</h4><p style='clear: both;'>See Section <a href="#section:webkey" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">webkey</a>.</p></section><section id='navitem_5'><h2>Putting It All in Perspective</h2><p style='clear: both;'>We have described MG-RAST, a community resource for the analysis of metagenomic sequence data. We have developed a new pipeline and environment for automated analysis of shotgun metagenomic data, as well as a series of interactive tools for comparative analysis. The pipeline is also being used for analyzing metatranscriptome data as well as amplicon data of various kinds. This service is being used by thousands of users worldwide, many contributing their data and analysis results to the community. We believe that community resources such as MG-RAST will fill a vital role in the bioinformatics ecosystem in the years to come.</p><h3>MG-RAST, a community resource</h3><p style='clear: both;'>MG-RAST has become a community clearinghouse for metagenomic data and analysis, with over 12,000 public datasets that can be freely used. Because analysis was performed in a uniform way, these datasets can serve as building blocks for new comparative analysis; so long as new datasets are analyzed similarly, results are robustly comparable between new and old dataset analysis. These datasets (and the resulting analysis data products) are made available for download and reuse as well.</p><p style='clear: both;'>Community resources like MG-RAST provide a clear value proposition to the metagenomics community. First, it enables low-cost meta-analysis. Users utilize the data products in MG-RAST as a basis for comparison without the need to reanalyze every dataset used in their studies. The high computational cost of analysis <a href="#citation_21" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[21]</a> makes precomputation a prerequisite for large-scale meta-analyses. In 2001, Angiuli et al.~<a href="#citation_2" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[2]</a> determined the real currency cost of reanalysis for the over 12,000 datasets openly available on MG-RAST to be in excess of $30 million if Amazon's EC2 platform is used.</p><p style='clear: both;'>This figure does not consider the 66,000 private datasets that have been analyzed with MG-RAST.</p><p style='clear: both;'>Second, it provides incentives to the community to adopt standards, in terms of both  metadata and analysis approaches. Without this standardization, data products are not readily reusable, and computational costs quickly become unsustainable. We are not arguing that a single analysis is necessarily suitable for all users; rather, we are pointing out that if one particular type of analysis is run for all datasets, the results can be efficiently reused, amortizing costs. Open access to data and analyses foster community interactions that make it easier for researchers' efforts to achieve consensus with respect to establishing best practices as well as identifying methods and analyses that could provide misleading results.</p><p style='clear: both;'>Third, community resources drive increased efficiency and computational performance. Community resources consolidate the demand for analysis resources sufficiently to drive innovation in algorithms and approaches. Because of this demand, the MG-RAST team has needed to scale the efficiency of their pipeline by a factor of nearly 1,000 over the past four years. This drive has caused improvements in gene calling, clustering, and sequence quality analysis, as well as many other areas. In less specialized groups with less extreme computational needs, this sort of efficiency gain would be difficult to achieve. Moreover, the large quantities of datasets that flow through the system have forced the hardening of the pipeline against a large variety of sequence pathology types that would not be readily observed in smaller systems.</p><p style='clear: both;'>We believe that our experiences in the design and operation of MG-RAST are representative of bioinformatics as a whole. The community resource model is critical if we are to benefit from the exponential growth in sequence data. This data has the potential to enable new insights into the world around us, but only if we can analyze it effectively. Only because of this approach have we been able to scale to the demands of our users effectively, analyzing over 200 billion sequences thus far.</p><p style='clear: both;'>We note that scaling to the required throughput by adding hardware to the system or simply renting time using an unoptimized pipeline on. For example,  Amazon's EC2 machine would not be economically feasible. The real currency cost on EC2 for the data currently analyzed in MG-RAST (26 terabasepairs) would be in excess of $100 million using an unoptimized workflow such as CLOVR <a href="#citation_2" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[2]</a>.</p><p style='clear: both;'>All of MG-RAST is open source and available on <a href="https://github.com/MG-RAST" target=_blank>https://github.com/MG-RAST</a>.</p><h3>Future Work</h3><p style='clear: both;'>While MG-RAST v3 is a substantial improvement over prior systems, much work remains to be done. Dataset sizes continue to increase at an exponential pace. Keeping up with this change remains a top priority, as metagenomics users continue to benefit from increased resolution of microbial communities. Upcoming versions of MG-RAST will include (1) mechanisms for speeding pipeline up using data reduction strategies that are biologically motivated; (2) opening up the data ecosystem via an API that will enable third-party development and enhancements; (3) providing distributed compute capabilities using user-provided resources; and (4) providing virtual integration of local datasets to allow comparison between local data and shared data without requiring full integration.</p><h4>Roadmap</h4><p style='clear: both;'>We maintain a rough roadmap for future version of MG-RAST.</p><h5>version 3.5</h5><ul><li>provide  a web services API</li><li>develop an R client</li></ul><h5>4.0</h5><ul><li>provide reviewer access tokens</li><li>consolidate all SQL onto PostGRES</li><li>provide beta version of MG-RAST remote compute client (using VMs)</li><li>include IPython-based notebooks for analysis</li><li>use AWE for all computations and SHOCK for all pipeline storage</li><li>provide multi-metagenome recruitment plot</li></ul><h5>version 4.x</h5><ul><li>rewrite web interface to support many browsers</li><li>provide BAM upload support</li><li>provide BAM download support</li></ul><h5>version 5.0</h5><ul><li>provide federated SHOCK system </li></ul><h3>Acknowledgments</h3><p style='clear: both;'>This work used the Magellan machine (U.S.Department of Energy, Office of Science, </p><p style='clear: both;'>Advanced Scientific Computing Research, under contract  DE-AC02-06CH11357) at Argonne National Laboratory, and the PADS resource (National Science Foundation grant OCI-0821678) at the Argonne National Laboratory/University of Chicago Computation Institute. This work was supported in part by the U.S. Dept. of Energy under Contract DE-AC02-06CH11357, the Sloan Foundation (SLOAN #2010-12), NIH NIAID (HHSN272200900040C), and the NIH Roadmap HMP program (1UH2DK083993-01).</p></section><section id='navitem_6'><h2>The downloadable files for each data set</h2><a name='chapter:downloads'></a><p style='clear: both;'><b>Uploaded File(s) DNA</b> (4465825.3.25422.fna)</p><p style='clear: both;'>Uploaded nucleotide sequence data in FASTA format.</p><p style='clear: both;'>Preprocessing</p><p style='clear: both;'>Depending on the options chosen, the preprocessing step filters sequences based on length, number of ambiguous bases and quality values if available.</p><p style='clear: both;'><b>passed, DNA</b> (4465825.3.100.preprocess.passed.fna)</p><p style='clear: both;'>A FASTA formatted file containing the sequences which were accepted and will be passed on to the next stage of the analysis pipeline.</p><p style='clear: both;'><b>removed, DNA</b> (4465825.3.100.preprocess.removed.fna)</p><p style='clear: both;'>A FASTA formatted file containing the sequences which were rejected and will not be passed on to the next stage of the analysis pipeline.</p><p style='clear: both;'>Dereplication</p><p style='clear: both;'>The optional dereplication step removes redundant "technical replicate" sequences from the metagenomic sample. Technical replicates are identified by binning reads with identical first 50 base-pairs. One copy of each 50-base-pair identical bin is retained.</p><p style='clear: both;'><b>passed, DNA</b> (4465825.3.150.dereplication.passed.fna)</p><p style='clear: both;'>A FASTA formatted file containing one sequence from each bin which will be passed on to the next stage of the analysis pipeline.</p><p style='clear: both;'><b>removed, DNA</b> (4465825.3.150.dereplication.removed.fna)</p><p style='clear: both;'>A FASTA formatted file containing the sequences which were identified as technical replicates and will not be passed on to the next stage of the analysis pipeline.</p><p style='clear: both;'>Screening</p><p style='clear: both;'>The optional screening step screens reads against model organisms using bowtie to remove reads which are similar to the genome of the selected species.</p><p style='clear: both;'><b>passed, DNA</b> (4465825.3.299.screen.passed.fna)</p><p style='clear: both;'>A FASTA formatted file containing the reads which which had no similarity to the selected genome and will be passed on to the next stage of the analysis pipeline.</p><p style='clear: both;'>Prediction of protein coding sequences</p><p style='clear: both;'>Coding regions within the sequences are predicted using FragGeneScan, an ab-initio prokaryotic gene calling algorithm. Using a hidden Markov model for coding regions and non-coding regions, this step identifies the most likely reading frame and translates nucleotide sequences into amino acids sequences. The predicted coding regions, possibly more than one per fragment, are called features.</p><p style='clear: both;'><b>coding, Protein</b> (4465825.3.350.genecalling.coding.faa)</p><p style='clear: both;'>A amino-acid sequence FASTA formatted file containing the translations of the predicted coding regions.</p><p style='clear: both;'><b>coding, DNA</b> (4465825.3.350.genecalling.coding.fna)</p><p style='clear: both;'>A nucleotide sequence FASTA formatted file containing the predicted coding regions.</p><p style='clear: both;'>RNA Clustering</p><p style='clear: both;'>Sequences from step 2 (before dereplication) are pre-screened for at least 60% identity to ribosomal sequences and then clustered at 97% identity using UCLUST. These clusters are checked for similarity against the ribosomal RNA databases (Greengenes<a href="#citation_42" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[42]</a>, LSU and SSU from <a href="#citation_41" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[41]</a>, and RDP).</p><p style='clear: both;'><b>rna97, DNA</b> (4465825.3.440.cluster.rna97.fna)</p><p style='clear: both;'>A FASTA formatted file containing sequences that have at least 60% identity to ribosomal sequences and are checked for RNA similarity.</p><p style='clear: both;'><b>rna97, Cluster</b> (4465825.3.440.cluster.rna97.mapping)</p><p style='clear: both;'>A tab-delimited file that identifies the sequence clusters and the sequences that comprise them.</p><p style='clear: both;'>The columns making up each line in this file are:</p><p style='clear: both;'>Cluster ID, e.g. rna97_998</p><p style='clear: both;'>Representative read ID, e.g. 11909294</p><p style='clear: both;'>List of IDs for other reads in the cluster, e.g. 11898451,11944918</p><p style='clear: both;'>List of percentage identities to the representative read sequence, e.g. 97.5%,100.0%</p><p style='clear: both;'><b>RNA similarities</b></p><p style='clear: both;'>The two files labelled "expand" are comma- and semicolon- delimited files that provide the mappings from md5s to function and md5s to taxonomy:</p><p style='clear: both;'><b>annotated, Sims</b> (4465825.3.450.rna.expand.lca)</p><p style='clear: both;'><b>annotated, Sims</b> (4465825.3.450.rna.expand.rna)</p><p style='clear: both;'>Packaged results of the blat search against all the DNA databases with <span class="glossary" data-toggle="popover" data-title="MD5" data-content="The MD5 message-digest algorithm is a widely used cryptographic hash function that produces a 128-bit (16-byte) hash value. Specified in RFC 1321, MD5 has been utilized in a wide variety of security applications, and is also commonly used to check data integrity">MD5<sup>[?]</sup></span> value of the database sequence hit followed by sequence or cluster ID, similarity information, annotation, organism, database name.</p><p style='clear: both;'><b>raw, Sims</b> (4465825.3.450.rna.sims)</p><p style='clear: both;'>This is the similarity output from BLAT. This includes the identifier for the query which is either the FASTA id or the cluster ID, and the internal identifier for the sequence that it hits.</p><p style='clear: both;'>The fields are in BLAST m8 format:</p><p style='clear: both;'>Query id (either fasta ID or cluster ID), e.g. 11847922</p><p style='clear: both;'>Hit id, e.g. lcl|501336051b4d5d412fb84afe8b7fdd87</p><p style='clear: both;'>percentage identity, e.g. 100.00</p><p style='clear: both;'>alignment length, e.g. 107</p><p style='clear: both;'>number of mismatches, e.g. 0</p><p style='clear: both;'>number of gap openings, e.g. 0</p><p style='clear: both;'>q.start, e.g. 1</p><p style='clear: both;'>q.end, e.g. 107</p><p style='clear: both;'>s.start, e.g. 1262</p><p style='clear: both;'>s.end, e.g. 1156</p><p style='clear: both;'>e-value, e.g. 1.7e-54</p><p style='clear: both;'>score in bits, e.g. 210.0</p><p style='clear: both;'><b>filtered, Sims</b> (15:04 4465825.3.450.rna.sims.filter)</p><p style='clear: both;'>This is a filtered version of the raw Sims file above that removes all but the best hit for each data source.</p><p style='clear: both;'>Gene Clustering</p><p style='clear: both;'>Protein coding sequences are clustered at 80% identity with UCLUST. This process does not remove any sequences but instead makes the similarity search step easier. Following the search, the original reads are loaded into MG-RAST for retrieval on-demand.</p><p style='clear: both;'><b>aa90, Protein</b> (4465825.3.550.cluster.aa90.faa)</p><p style='clear: both;'>An amino acid sequence FASTA formatted file containing the translations of one sequence from each cluster (by cluster ids starting with aa90_) and all the unclustered (singleton) sequences with the original sequence ID.</p><p style='clear: both;'><b>aa90, Cluster</b> (4465825.3.550.cluster.aa90.mapping)</p><p style='clear: both;'>A tab-separated file in which each line describes a single cluster.</p><p style='clear: both;'>The fields are:</p><p style='clear: both;'>Cluster ID, e.g. aa90_3270</p><p style='clear: both;'>protein coding sequence ID including hit location and strand, e.g. 11954908_1_121_+</p><p style='clear: both;'>additional sequence ids including hit location and strand, e.g. 11898451_1_119_+,11944918_19_121_+</p><p style='clear: both;'>sequence % identities, e.g. 94.9%,97.0%</p><p style='clear: both;'>Protein similarities</p><p style='clear: both;'><b>annotated, Sims</b> (4465825.3.650.superblat.expand.lca)</p><p style='clear: both;'>The expand.lca file decodes the <span class="glossary" data-toggle="popover" data-title="MD5" data-content="The MD5 message-digest algorithm is a widely used cryptographic hash function that produces a 128-bit (16-byte) hash value. Specified in RFC 1321, MD5 has been utilized in a wide variety of security applications, and is also commonly used to check data integrity">MD5<sup>[?]</sup></span> to the taxonomic classification it is annotated with.</p><p style='clear: both;'>The format is:</p><p style='clear: both;'>md5(s), e.g. cf036dfa9cdde3a8a4c09d7fabfd9ba5;1e538305b8319dab322b8f28da82e0a1</p><p style='clear: both;'>feature id (for singletons) or cluster id of hit including hit location and strand, e.g. 11857921_1_101_-</p><p style='clear: both;'>alignment %, e.g. 70.97;70.97</p><p style='clear: both;'>alignment length, e.g. 31;31</p><p style='clear: both;'>E-value, e.g. 7.5e-05;7.5e-05</p><p style='clear: both;'>Taxonomic string, e.g. Bacteria;Actinobacteria;Actinobacteria (class);Coriobacteriales;Coriobacteriaceae;Slackia;Slackia exigua;-</p><p style='clear: both;'><b>annotated, Sims</b> (4465825.3.650.superblat.expand.protein)</p><p style='clear: both;'>Packaged results of the blat search against all the protein databases with <span class="glossary" data-toggle="popover" data-title="MD5" data-content="The MD5 message-digest algorithm is a widely used cryptographic hash function that produces a 128-bit (16-byte) hash value. Specified in RFC 1321, MD5 has been utilized in a wide variety of security applications, and is also commonly used to check data integrity">MD5<sup>[?]</sup></span> value of the database sequence hit followed by sequence or cluster ID, similarity information, functional annotation, organism, database name.</p><p style='clear: both;'>Format is:</p><p style='clear: both;'>md5 (identifier for the database hit), e.g. 88848aa7224ca2f3ac117e7953edd2d9</p><p style='clear: both;'>feature id (for singletons) or cluster ID for the query, e.g. aa90_22837</p><p style='clear: both;'>alignment % identity, e.g. 76.47</p><p style='clear: both;'>alignment length, e.g. 34</p><p style='clear: both;'>E-value, e.g. 1.3e-06</p><p style='clear: both;'>protein functional label, e.g. SsrA-binding protein</p><p style='clear: both;'>Species name associated with best protein hit, e.g. Prevotella bergensis DSM 17361 RefSeq 585502</p><p style='clear: both;'><b>raw, Sims</b> (4465825.3.650.superblat.sims)</p><p style='clear: both;'>Blat output with sequence or cluster ID, md5 value for the sequence in the database and similarity information.</p><p style='clear: both;'><b>filtered, Sims</b> (4465825.3.650.superblat.sims.filter)</p><p style='clear: both;'>Blat output filtered to take only the best hit from each data source.</p></section><section id='navitem_7'><h2>Terms of Service</h2><ul><li>MG-RAST is a web-based computational metagenome analysis service provided on a best-effort basis. We strive to provide correct analysis, privacy, but can not guarantee correctness of results, integrity of data or privacy. That being said, we are not responsible for any HIPPA regulations regarding human samples uploaded by users. We will try to provide as much speed as possible and will try to inform users about wait times. We will inform users about changes to the system and the underlying data.</li><li>We reserve the right to delete non public data sets after 120 days.</li><li>We reserve the right to reject data set that are not complying with the purpose of MG-RAST.</li><li>We reserve the right to perform additional data analysis (e.g. search for novel sequence errors to improve our sequence quality detection, clustering to improve sequence similarity searches etc.) AND in certain cases utilize the results. We will NOT release user provided data without consent and or publish on user data before the user.</li><li>User acknowledges the restrictions stated about and will cite MG-RAST when reporting on their work.</li><li>User acknowledges the fact that data sharing on MG-RAST is meant as a pre-publication mechanism and we strongly encourage users to make data publicly accessible in MG-RAST once published in a journal (or after 120 days).</li><li>User acknowledges that data (including metadata) provided is a) correct and b) user either owns the data or has the permission of the owner to upload data and or publish data on MG-RAST.</li><li>We reserve the right to curate and update public meta data.</li></ul></section><section id='navitem_8'><h2>Tools and data used by MG-RAST</h2><p style='clear: both;'>The MG-RAST team is happy to acknowledge the use of the following great software and data products:</p><p style='clear: both;'>Databases</p><p style='clear: both;'>MG-RAST uses a number of protein and ribosomal RNA databases integrated into the M5nr <a href="#citation_29" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[29]</a> (Wilke et al, BMC Bioinformatics 2012. Vol 13, No. 151) non-redundant database using the M5nr tools.</p><h3>Databases</h3><h4>Protein databases</h4><ul><li>   The <span class="glossary" data-toggle="popover" data-title="SEED" data-content="The SEED effort led by Ross Overbeek is a systematic annotation effort for prokaryotic genomes using Subsystems">SEED<sup>[?]</sup></span> <a href="#citation_17" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[17]</a> (Overbeek et al., NAR, 2005, Vol. 33, Issue 17)</li><li>    GenBank <a href="#citation_3" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[3]</a> (Benson et al., NAR, 2011, Vol. 39, Database issue)</li><li>    RefSeq <a href="#citation_39" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[39]</a> (Pruitt et al., NAR, 2009, Vol. 37, Database issue)</li><li>   IMG/M (Markowitz et al., NAR, 2008, Vol. 36, Database issue)</li><li>   UniProt <a href="#citation_40" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[40]</a> (Apweiler et al., NAR, 2011, Vol. 39, Database issue)</li><li>    eggNOGG <a href="#citation_10" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[10]</a> (Muller et al., NAR, 2010, Vol. 38, Database issue)</li><li>    KEGG <a href="#citation_11" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[11]</a> (Kanehisa et al., NAR, 2008, Vol. 36, Database issue)</li></ul><h4>Ribosomal RNA databases</h4><ul><li>   greengenes <a href="#citation_42" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[42]</a> (DeSantis et al., Appl Environ Microbiol., 2006, Vol. 72, no. 7)</li><li>   SILVA <a href="#citation_41" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[41]</a> (Pruesse et al., NAR, 2007, Vol. 35, issue 21)</li></ul><h3>Software</h3><h4>Bioinformatics codes</h4><a name='section:bioinformatics-codes'></a><ul><li>     FragGeneScan <a href="#citation_16" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[16]</a> (Rho et al, NAR, 2010, Vol. 38, issue 20)</li><li>    BLAT <a href="#citation_13" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[13]</a> (J. Kent, Genome Res, 2002, Vol. 12, No. 4)</li><li>    QIIME <a href="#citation_4" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[4]</a> (Caporaso et al, Nature Methods, 2010, Vol. 7, No. 5) (we also use uclust that is part of QIIME)</li><li>    Biopython</li><li>    Bowtie <a href="#citation_14" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[14]</a> (Langmead et al., Genome Biol. 2009, Vol 10, issue 3)</li><li>    sff_extract, Jose Blanca and Joaquin CaÃ±izares</li><li>     Dynamic Trim, part of SolexaQA, <a href="#citation_25" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[25]</a> (Cox et al., BMC Bioinformatics, 2011, Vol. 11, 485)</li></ul><h4>Web/UI tools</h4><ul><li>   Krona <a href="#citation_30" onclick="location.hash=this.getAttribute('href');window.scrollBy(0,-60);return false;">[30]</a> (Ondov et. al. BMC Bioinformatics, 2011, Vol. 12, 385)</li><li>   Raphael JavaScript Library (Dmitry Baranovskiy)</li><li>    jQuery</li><li>   Circos (Krzywinski et al., Genome Res. 2009, Vol. 19)</li></ul><h4>Behind the scenes</h4><ul><li>   Perl</li><li>   Python</li><li>   R</li><li>   Google's V8  JavaScript engine</li><li>     Node.js</li><li>    nginx</li></ul></section><section id='bibliography'><h2>Bibliography</h2><table><tr><td style='vertical-align: top; width: 30px;'><a name='citation_1' style='color: black;'>[1]</a></td><td>C.S. Riesenfeld, P.D. Schloss and J. Handelsman. Metagenomics: genomic analysis of microbial communities. <i>Annu Rev Genet</i>, 38:525-52, 2004.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_2' style='color: black;'>[2]</a></td><td>S.V. Angiuoli, M. Matalka, A. Gussman, K. Galens, M. Vangala, D.R. Riley, C. Arze, J.R. White, O. White and W.F. Fricke. CloVR: a virtual machine for automated and portable sequence analysis from the desktop using cloud computing. <i>BMC Bioinformatics</i>, 12:356, 2011.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_3' style='color: black;'>[3]</a></td><td>D.A. Benson, M. Cavanaugh, K. Clark, I. Karsch-Mizrachi, D.J. Lipman, J. Ostell and E.W. Sayers. GenBank. <i>Nucleic Acids Res</i>, 41:D36-42, 2013.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_4' style='color: black;'>[4]</a></td><td>J.G. Caporaso, J. Kuczynski, J. Stombaugh, K. Bittinger, F.D. Bushman, E.K. Costello, N. Fierer, A.G. Pena, J.K. Goodrich, J.I. Gordon, G.A. Huttley, S.T. Kelley, D. Knights, J.E. Koenig, R.E. Ley, C.A. Lozupone, D. McDonald, B.D. Muegge, M. Pirrung, J. Reeder, J.R. Sevinsky, P.J. Turnbaugh, W.A. Walters, J. Widmann, T. Yatsunenko, J. Zaneveld and R. Knight. QIIME allows analysis of high-throughput community sequencing data. <i>Nat Methods</i>, 7:335-6, 2010.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_5' style='color: black;'>[5]</a></td><td>R.C. Edgar. Search and clustering orders of magnitude faster than BLAST. <i>Bioinformatics</i>, 26:2460-1, 2010.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_6' style='color: black;'>[6]</a></td><td>D. Field, L. Amaral-Zettler, G. Cochrane, J.R. Cole, P. Dawyndt, G.M. Garrity, J. Gilbert, F.O. Gl&ouml;ckner, L. Hirschman and I. Karsch-Mizrachi. The Genomic Standards Consortium. <i>PLOS Biology</i>, 9:e1001088, 2011.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_7' style='color: black;'>[7]</a></td><td>V. Gomez-Alvarez, T.K. Teal and T.M. Schmidt. Systematic artifacts in metagenomes from complex microbial communities. <i>ISME J</i>, 3:1314-7, 2009.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_8' style='color: black;'>[8]</a></td><td>S.M. Huse, J.A. Huber, H.G. Morrison, M.L. Sogin and D.M. Welch. Accuracy and quality of massively parallel DNA pyrosequencing. <i>Genome Biol</i>, 8:R143, 2007.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_9' style='color: black;'>[9]</a></td><td>D.H. Huson, A.F. Auch, J. Qi and S.C. Schuster. MEGAN analysis of metagenomic data. <i>Genome Res</i>, 17:377-86, 2007.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_10' style='color: black;'>[10]</a></td><td>L.J. Jensen, P. Julien, M. Kuhn, C. von Mering, J. Muller, T. Doerks and P. Bork. eggNOG: automated construction and annotation of orthologous groups of genes. <i>Nucleic Acids Res</i>, 36:D250-4, 2008.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_11' style='color: black;'>[11]</a></td><td>M. Kanehisa. The KEGG database. <i>Novartis Found Symp</i>, 247:91-101; discussion 101-3, 119-28, 244-52, 2002.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_12' style='color: black;'>[12]</a></td><td>K.P. Keegan, W.L. Trimble, J. Wilkening, A. Wilke, T. Harrison, M. D'Souza and F. Meyer. A platform-independent method for detecting errors in metagenomic sequencing data: DRISEE. <i>PLOS Comput Biol</i>, 8:e1002541, 2012.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_13' style='color: black;'>[13]</a></td><td>W.J. Kent. BLAT--the BLAST-like alignment tool. <i>Genome Res</i>, 12:656-64, 2002.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_14' style='color: black;'>[14]</a></td><td>B. Langmead, C. Trapnell, M. Pop and S.L. Salzberg. Ultrafast and memory-efficient alignment of short DNA sequences to the human genome. <i>Genome Biol</i>, 10:R25, 2009.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_15' style='color: black;'>[15]</a></td><td>D. McDonald, J.C. Clemente, J. Kuczynski, J. Rideout, J. Stombaugh, D. Wendel, A. Wilke, S. Huse, J. Hufnagle and F. Meyer. The Biological Observation Matrix (BIOM) format or: how I learned to stop worrying and love the ome-ome. <i>Gigascience</i>, , 2012.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_16' style='color: black;'>[16]</a></td><td>Mina Rho, Haixu Tang and Yuzhen Ye. FragGeneScan: predicting genes in short and error-prone reads. <i>Nucleic acids research</i>, 38:e191--e191, 2010.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_17' style='color: black;'>[17]</a></td><td>R. Overbeek, T. Begley, R.M. Butler, J.V. Choudhuri, N. Diaz, H.-Y. Chuang, M. Cohoon, V. de Cr&eacute;cy-Lagard, T. Disz, R Edwards, M Fonstein, E.D. Frank, S. Gerdes, E.M. Glass, A. Goesmann, L. Krause, B. Linke, A.C. McHardy, F. Meyer, A. Hanson, D. Iwata-Reuyl, R. Jensen, N. Jamshidi, M. Kubal, N. Larsen, H. Neuweger, C. R&uuml;ckert, G.J. Olsen, R. Olson, A. Osterman, V. Portnoy, G.D. Pusch, D.A. Rodionov, J. Steiner, R. Stevens, I. Thiele, O. Vassieva, Y. Ye, O. Zagnitko and V. Vonstein. The Subsystems Approach to Genome Annotation and its Use in the Project to Annotate 1000 Genomes. <i>Nucleic Acids Res</i>, 33, 2005.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_18' style='color: black;'>[18]</a></td><td>J. Reeder and R. Knight. The `rare biosphere': a reality check. <i>Nat Methods</i>, 6:636-7, 2009.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_19' style='color: black;'>[19]</a></td><td>W.L. Trimble, K.P. Keegan, M. D'Souza, A. Wilke, J. Wilkening, J. Gilbert and F. Meyer. Short-read reading-frame predictors are not created equal: sequence error causes loss of signal. <i>BMC Bioinformatics</i>, 13:183, 2012.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_20' style='color: black;'>[20]</a></td><td>P.J. Turnbaugh, R.E. Ley, M.A. Mahowald, V. Magrini, E.R. Mardis and J.I. Gordon. An obesity-associated gut microbiome with increased capacity for energy harvest. <i>Nature</i>, 444:1027-31, 2006.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_21' style='color: black;'>[21]</a></td><td>J. Wilkening, A. Wilke, N. Desai and F. Meyer. Using Clouds for Metagenomics: A case study. In <i>IEEE Cluster 2009</i>, 2009.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_22' style='color: black;'>[22]</a></td><td>Pelin Yilmaz, Renzo Kottmann, Dawn Field, Rob Knight, James Cole, Linda Amaral-Zettler, Jack Gilbert, Ilene Karsch-Mizrachi, Anjanette  Johnston, Guy Cochrane, Robert  Vaughan, Christopher Hunter, Joonhong Park, Norman Morrison, Phillipe Rocca-Serra, Peter Sterk, Mani Arumugam, Laura Baumgartner, Bruce Birren, Martin Blaser, Vivien Bonazzi, Peer Bork, Pier Luigi Buttigieg, Patrick Chain, Elizabeth Costello, Heather Huot-Creasy, Peter Dawyndt, Todd DeSantis, Noah Fierer, Jed Fuhrman, Rachel Gallery, Richard Gibbs, Michelle Gwinn Giglio, Inigo San Gil, Elizabeth Glass, Antonio Gonzalez, Jeffrey Gordon, Robert Guralnick, Wolfgang Hankeln, Sarah Highlander, Philip Hugenholtz, Janet Jansson, Jerry Kennedy, Dan Knights, Omry Koren, Justin Kuczynski, Nikos Kyrpides, Robert Larsen, Christian Lauber, Teresa Legg, Ruth Ley, Catherine  Lozupone, Wolfgang Ludwig, Donna Lyons, Eamonn  Maguire, Barbara Meth&eacute;, Folker Meyer, Sara Nakielny, Karen Nelson, Diana Nemergut, Josh Neufeld, Norman Pace, Giriprakash Palanisamy, J&ouml;rg Peplies, Jane Peterson, Joseph Petrosino, Lita Proctor, Jeroen Raes, Sujeevan Ratnasingham, Jacques Ravel, David Relman, Susanna Assunta-Sansone, Lynn Schriml, Erica Sodergren, Aym&eacute; Spor, Jesse Stombaugh, James Tiedje, Doyle Ward, George Weinstock, Doug Wendel, Owen White, Andreas Wilke, Jennifer Wortmann and Frank Oliver  Gl&ouml;ckner. The "Minimum Information about an ENvironmental Sequence'' (MIENS) specification. <i>Nature Biotechnology</i>, , 2010.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_23' style='color: black;'>[23]</a></td><td>OpenMP Architecture Review Board. <i>OpenMP Application Program Interface Version 3.1</i>. July 2011. This document is available as a PDF from <span class="mono">http://www.openmp.org/mp-documents/OpenMP3.1.pdf</span>.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_24' style='color: black;'>[24]</a></td><td>B. Chapman, G Jost and R. van der Pas. <i>Using OpenMP: Portable Shared Memory Parallel Programming (Scientific and Engineering Computation)</i>. The MIT Press, 2007.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_25' style='color: black;'>[25]</a></td><td>M.P. Cox, D. A. Peterson and P.J. Biggs. SolexaQA: At-a-glance quality assessment of Illumina second-generation sequencing data. <i>BMC Bioinformatics</i>, 11:485, 2010.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_26' style='color: black;'>[26]</a></td><td>V.M. Markowitz, N.N. Ivanova, E. Szeto, K. Palaniappan, K. Chu, D. Dalevi, I. M. Chen, Y. Grechkin, I. Dubchak, I. Anderson, A. Lykidis, K. Mavromatis, P. Hugenholtz and N.C. Kyrpides. IMG/M: a data management and analysis system for metagenomes. <i>Nucleic Acids Res</i>, 36:D534-8, 2008.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_27' style='color: black;'>[27]</a></td><td>R.L. Tatusov, N.D. Fedorova, J.D. Jackson, A.R. Jacobs, B. Kiryutin, E.V. Koonin, D.M. Krylov, R. Mazumder, S.L. Mekhedov, A.N. Nikolskaya, B.S. Rao, S. Smirnov, A.V. Sverdlov, S. Vasudevan, Y.I. Wolf, J.J. Yin and D.A. Natale. The COG database: an updated version includes eukaryotes. <i>BMC Bioinformatics</i>, 4:41, 2003.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_28' style='color: black;'>[28]</a></td><td>A. Wilke, J. Wilkening, E.M. Glass, N. Desai and F. Meyer. An experience report: porting the MG-RAST rapid metagenomics analysis pipeline to the cloud. . <i>Concurrency and Computation: Practice and Experience</i>,  23:2250â2257, 2011.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_29' style='color: black;'>[29]</a></td><td>A. Wilke, T. Harrison, J. Wilkening, D. Field, E.M. Glass, N. Kyrpides, K. Mavrommatis and F. Meyer. The M5nr: a novel non-redundant database containing protein sequences and annotations from multiple sources and associated tools. <i>BMC Bioinformatics</i>, 13:141, 2012.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_30' style='color: black;'>[30]</a></td><td>B.D. Ondov, N.H. Bergman and A.M. Phillippy. Interactive metagenomic visualization in a Web browser. <i>BMC Bioinformatics</i>, 12:385, 2011.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_31' style='color: black;'>[31]</a></td><td>F. Meyer, D. Paarmann, M. D'Souza, R. Olson, E.M. Glass, M. Kubal, T. Paczian, A. Rodriguez, R. Stevens, A. Wilke, J. Wilkening and R.A. Edwards. The metagenomics RAST server - a public resource for the automatic phylogenetic and functional analysis of metagenomes. <i>BMC Bioinformatics</i>, 9:386, 2008.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_32' style='color: black;'>[32]</a></td><td>Terry Speed. <i>Statistical Analysis of Gene Expression Microarray Data</i>. Chapman and Hall/CRC, 2003.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_33' style='color: black;'>[33]</a></td><td>Torsten Thomas, Jack Gilbert and Folker Meyer. Metagenomics - a guide from sampling to data analysis. <i>Microbial Informatics and Experimentation</i>, 2:3, 2012.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_34' style='color: black;'>[34]</a></td><td>Nicholas J. Loman, Raju V. Misra, Timothy J. Dallman, Chrystala Constantinidou, Saheer E Gharbia, John Wain and Mark J. Pallen. Performance comparison of benchtop high-throughput sequencing platforms. <i>Nature Biotechnology</i>, 30:434--439, 2012.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_35' style='color: black;'>[35]</a></td><td>Kottmann R., Gray T., Murphy S., Kagan L., Kravitz S., Lombardot T., Field D. and GlÃ¶ckner FO; Genomic Standards Consortium. A standard MIGS/MIMS compliant XML Schema: toward the development of the Genomic Contextual Data Markup Language (GCDML). <i>OMICS</i>, 12:115-21, 2008.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_36' style='color: black;'>[36]</a></td><td>National Human Genome Research Institute. Cost per Raw Megabase of DNA Sequence, 2012. This document is available on the NHGRI website at <span class="mono">http://www.genome.gov/sequencingcosts/</span>.  <a href='http://www.genome.gov/images/content/cost_per_megabase.jpg' target=_blank>http://www.genome.gov/images/content/cost_per_megabase.jpg</a></td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_37' style='color: black;'>[37]</a></td><td>W3C. File API; W3C Working Draft, 25 October 2012, 2012.  <a href='http://www.w3.org/TR/FileAPI/' target=_blank>http://www.w3.org/TR/FileAPI/</a></td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_38' style='color: black;'>[38]</a></td><td>Ramy Aziz, Daniela Bartels, Aaron Best, Matthew DeJongh, Terrence Disz, Robert Edwards, Kevin Formsma, Svetlana Gerdes, Elizabeth Glass, Michael Kubal, Folker Meyer, Gary Olsen, Robert Olson, Andrei Osterman, Ross Overbeek, Leslie McNeil, Daniel Paarmann, Tobias Paczian, Bruce Parrello, Gordon Pusch, Claudia Reich, Rick Stevens, Olga Vassieva, Veronika Vonstein, Andreas Wilke and Olga Zagnitko. The RAST Server: Rapid Annotations using Subsystems Technology. <i>BMC Genomics</i>, 9:75, 2008.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_39' style='color: black;'>[39]</a></td><td>K.D. Pruitt, T. Tatusova and D.R. Maglott. NCBI reference sequences (RefSeq): a curated non-redundant sequence database of genomes, transcripts and proteins.. <i>Nucleic Acids Res</i>, 35, 2007.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_40' style='color: black;'>[40]</a></td><td>E.E. Snyder, N. Kampanya, J. Lu, E.K. Nordberg, H.R. Karur, M. Shukla, J. Soneja, Y. Tian, T. Xue, H. Yoo, F. Zhang, C. Dharmanolla, N.V. Dongre, J.J. Gillespie, J. Hamelius, M. Hance, K.I. Huntington, D. Jukneliene, J. Koziski, L. Mackasmiel, S.P. Mane, V. Nguyen, A. Purkayastha, J. Shallom, G. Yu, Y. Guo, J. Gabbard, D. Hix, A.F. Azad, S.C. Baker, S.M. Boyle, Y. Khudyakov, X.J. Meng, C. Rupprecht, J. Vinje, O.R. Crasta, M.J. Czar, A. Dickerman, J.D. Eckart, R. Kenyon, R. Will, J.C. Setubal and B.W. Sobral. PATRIC: the VBI PathoSystems Resource Integration Center.. <i>Nucleic Acids Res</i>, 35, 2007.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_41' style='color: black;'>[41]</a></td><td>Elmar Pruesse, Christian Quast, Katrin Knittel, Bernhard M. Fuchs, Wolfgang Ludwig, J&ouml;rg Peplies and Frank Oliver O. Gl&ouml;ckner. SILVA: a comprehensive online resource for quality checked and aligned ribosomal RNA sequence data compatible with ARB.. <i>Nucleic acids research</i>, 35:7188--7196, 2007.</td></tr><tr><td style='vertical-align: top; width: 30px;'><a name='citation_42' style='color: black;'>[42]</a></td><td>T.Z. DeSantis, P. Hugenholtz, N. Larsen, M. Rojas, E.L. Brodie, K. Keller, T. Huber, D. Dalevi, P. Hu and G.L. Andersen. Greengenes, a Chimera-Checked16S rRNA Gene Database and Workbench Compatible with ARB. <i>Appl. Environ. Microbiol.</i>, 72:5069--5072, 2006.</td></tr></table></section>
        </div>
      </div>
    </div>
    <script src="js/bootstrap.min.js"></script>
    <script>
    jQuery('#docs-sidebar').scrollspy();
    jQuery('.glossary').each(function(i){
      jQuery(this).popover( { trigger: "hover" } );
    });
    jQuery('.footnote').each(function(i){
      jQuery(this).popover( { trigger: "hover" } );
    });
    </script>
  </body>
</html>
